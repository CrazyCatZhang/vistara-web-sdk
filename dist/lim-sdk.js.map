{"version":3,"sources":["webpack://imsdk/webpack/universalModuleDefinition","webpack://imsdk/webpack/bootstrap","webpack://imsdk/./src/lim/log/Logger.ts","webpack://imsdk/./src/lim/common/utils.ts","webpack://imsdk/./src/lim/core/ImClient.ts","webpack://imsdk/./src/lim/common/WebToolkit.ts","webpack://imsdk/./src/lim/common/Fetch.ts","webpack://imsdk/./src/lim/common/ConversationType.ts","webpack://imsdk/./src/lim.ts","webpack://imsdk/./src/lim/codec/ByteBuffer.ts","webpack://imsdk/./src/lim/pack/LoginPack.ts","webpack://imsdk/(webpack)/buildin/global.js","webpack://imsdk/./node_modules/wxapp-fetch/dist/wxapp-fetch.js","webpack://imsdk/./node_modules/isomorphic-fetch/fetch-npm-browserify.js","webpack://imsdk/./node_modules/whatwg-fetch/fetch.js","webpack://imsdk/./src/lim/uniapp/http/uni-fetch.js","webpack://imsdk/./node_modules/websocket/lib/browser.js","webpack://imsdk/./node_modules/es5-ext/global.js","webpack://imsdk/./node_modules/websocket/lib/version.js","webpack://imsdk/./src/lim/model/RequestBase.ts","webpack://imsdk/./src/lim/model/RequestParams.ts","webpack://imsdk/./src/lim/core/HttpApi.ts","webpack://imsdk/./src/lim/model/ApiResponse.ts","webpack://imsdk/./src/lim/common/Command.ts","webpack://imsdk/./src/lim/utils/CreateMessage.ts","webpack://imsdk/./src/lim/pack/MessagePack.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__spreadArrays","this","il","arguments","length","Array","k","a","j","jl","Logger","info","message","optionalParams","_i","debug","console","apply","Date","toISOString","infoTag","tag","error","errorTag","trace","e","Error","undefined","stack","Beans","to","target","JSON","parse","stringify","bean","json","copy","replace","replaceJSON","v","toMapByKey","arrs","result","forEach","strEmpty","strNotEmpty","isEmpty","str","uuid","Math","random","toString","slice","getTime","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","op","TypeError","pop","push","imClient","getLen","limLogin","ImClient","sleep","State","TimeUnit","Logger_1","ByteBuffer_1","LoginPack_1","WebToolkit_1","websocket_1","RequestBase_1","RequestParams_1","HttpApi_1","utils_1","Command_1","CreateMessage_1","ConversationType_1","firstMonitorSocket","second","Unit","Second","_a","setTimeout","url","version","clientType","listeners","state","INIT","httpUrl","getRequestBase","RequestBase","appId","imei","isInit","CONNECTED","getRequestParams","RequestParams","userId","userSign","init","callback","self","resp","ip","port","req","success","err","conn","_this","_b","getDeviceInfo","system","imeiLength","isFailed","data","LoginPack","onerror","onSocketErrorEvent","errorHandler","onclose","CLOSEING","onSocketCloseEvent","reason","onmessage","evt","bytebuf","byteBuffer","int32","unpack","command","bodyLen","msgBody","vstring","log","MessageCommand","MSG_P2P","onP2PMessage","MSG_ACK","onMessageAck","MSG_RECEIVE_ACK","onMessageReceiveAck","MSG_READED_NOTIFY","onMessageReadedNotify","MSG_READED_RECEIPT","onMessageReadedReceipt","MSG_RECALL_NOTIFY","onMessageRecallNotify","MSG_RECALL_ACK","onMessageRecallAck","FriendshipEventCommand","FRIEND_ADD","onAddFriend","FRIEND_UPDATE","onUpdateFriend","FRIEND_DELETE","onDeleteFriend","FRIEND_REQUEST","onFriendRequest","FRIEND_REQUEST_READ","onReadFriendRequest","FRIEND_REQUEST_APPROVE","onApproveFriendRequest","FRIEND_BLACK_ADD","onBlackFriend","FRIEND_BLACK_DELETE","onDeleteBlackFriend","FRIEND_GROUP_ADD","onAddFriendGroup","FRIEND_GROUP_DELETE","onDeleteFriendGroup","FRIEND_GROUP_MEMBER_ADD","onAddFriendGroupMember","FRIEND_GROUP_MEMBER_DELETE","onDeleteFriendGroupMember","FRIEND_ALL_DELETE","onDeleteAllFriend","GroupEventCommand","JOIN_GROUP","onJoinGroup","ADDED_MEMBER","onAddGroupMember","CREATED_GROUP","onCreateGroup","UPDATED_GROUP","onUpdateGroup","EXIT_GROUP","onExitGroup","UPDATED_MEMBER","onUpdateGroupMember","DELETED_MEMBER","onDeleteGroupMember","DESTROY_GROUP","onDestroyGroup","TRANSFER_GROUP","onTransferGroup","MUTE_GROUP","onMuteGroup","SPEAK_GROUP_MEMBER","onMuteGroupMember","GROUP_REQUEST_APPROVE","onApproveGroupRequest","GROUP_REQUEST_READ","onReadGroupRequest","MSG_GROUP","onGroupMessage","MSG_GROUP_READED_NOTIFY","onGroupMessageReadedNotify","MSG_GROUP_READED_RECEIPT","onGroupMessageReadedReceipt","GROUP_MSG_ACK","onGroupMessageAck","UserEventCommand","USER_MODIFY","onUserModify","USER_ONLINE_STATUS_CHANGE_NOTIFY","onUserOnlineStatusChangeNotify","USER_ONLINE_STATUS_CHANGE_NOTIFY_SYNC","onUserOnlineStatusChangeNotifySync","USER_CUSTOM_STATUS_CHANGE_NOTIFY","onUserCustomStatusChangeNotify","ConversationEventCommand","CONVERSATION_DELETE","onConversationDelete","CONVERSATION_UPDATE","onConversationUpdate","heartbeatLoop","onLogin","buildMessagePack","messagePack","jsonData","pack","index","error_1","CLOSED","RECONNECTING","onSocketReConnectEvent","onSocketReConnectSuccessEvent","getSingleUserInfo","uid","syncGetUserInfo","userIds","getUserInfo","getAllFriend","fromId","start","now","loop","pingPack","SystemCommand","PING","send","sendP2PTextMessage","text","createTextMessage","P2PMessage","p2pPack","sendP2PImageMessage","image","createImageMessage","sendP2PAudioMessage","audio","createAudioMessage","sendP2PVideoMessage","video","createVideoMessage","sendP2PEmojiMessage","emoji","createEmojiMessage","sendP2PFileMessage","file","createFileMessage","sendP2PLocationMessage","location","createLocationMessage","sendP2PCustomerMessage","type","custom","createCustomerMessage","sendGroupTextMessage","GroupMessage","sendGroupImageMessage","sendGroupAudioMessage","sendGroupVideoMessage","sendGroupEmojiMessage","sendGroupFileMessage","sendGroupLocationMessage","sendGroupCustomerMessage","getUserId","w3cwebsocket","binaryType","tr","clearTimeout","onopen","readyState","OPEN","onSocketConnectEvent","loginPack","LOGIN","LOGIN_ACK","len","charCodeAt","Fetch_1","Base64","_keyStr","encode","u","_utf8_encode","isNaN","charAt","decode","indexOf","String","fromCharCode","_utf8_decode","c2","c3","WebToolkit","getBrowserInfo","agent","navigator","userAgent","toLowerCase","REGSTR_EDGE","REGSTR_IE","OLD_IE","REGSTR_FF","REGSTR_CHROME","REGSTR_SAF","REGSTR_OPERA","code","split","browser","browserVersion","match","getWxAppInfo","getReactNativeInfo","getUniAppInfo","loadJS","script","document","createElement","fn","exist","getElementsByTagName","children","dom","outerHTML","onreadystatechange","onload","src","appendChild","getIpInfoByFetch","fetch","getFetchToolkit","request","method","headers","response","res","currentCity","eval","getIpInfoByInsertScript","getIpInfo","base64Encode","base64Decode","Fetch","httpFetch","global","ConversationType","im","ImClient_1","uni","ByteBuffer","arrayBuf","offset","Type_Byte","Type_Short","Type_UShort","Type_Int32","Type_UInt32","Type_String","Type_VString","Type_Int64","Type_Float","Type_Double","Type_ByteArray","_offset","_list","_littleEndian","_org_buf","constructor","DataView","Uint8Array","buffer","bigEndian","littleEndianfunction","utf8Write","view","setUint8","val","getInt32","splice","uint32","getUint32","blength","string","utf8Read","utf8Length","chr","end","byte","getUint8","vlen","int64","getFloat64","float","getFloat32","double","byteArray","arr","packWithHead","ifHead","ArrayBuffer","setUint32","setInt8","setInt16","setUint16","setInt32","setFloat64","setFloat32","indx","getAvailable","byteLength","Function","configurable","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_wxapp_http__","__WEBPACK_IMPORTED_MODULE_0_wxapp_http___default","_typeof","obj","httpClient","maxConcurrent","timeout","header","dataType","generateResponse","config","ok","statusCode","status","statusText","errMsg","clone","blob","Blob","keys","entries","all","has","options","catch","extendStatics","__extends","setPrototypeOf","__proto__","b","__","__assign","assign","event_emitter_js_1","DEFAULT_CONFIG","Http","_super","ctx","wx","queue","runningTask","requestInterceptor","responseInterceptor","entity","shift","emit","callBack","fail","complete","requestConfig","head","post","put","connect","setRequestInterceptor","interceptor","setResponseInterceptor","clean","default","randomId","substr","findIndexById","id","findIndex","EventEmitter","on","event","listener","events","container","off","clear","once","argv","concat","map","emitting","dataArray","globalThis","support","viewClasses","isArrayBufferView","isView","normalizeName","test","normalizeValue","iteratorFor","items","Headers","append","isArray","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","bufferClone","buf","set","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","arrayBuffer","isConsumed","byteOffset","readAsText","chars","join","readArrayBufferAsText","formData","oldValue","values","methods","Request","input","upcased","credentials","signal","toUpperCase","referrer","cache","reParamSearch","form","trim","bytes","decodeURIComponent","Response","bodyInit","redirectStatuses","redirect","RangeError","DOMException","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","responseText","ontimeout","onabort","open","href","fixUrl","withCredentials","responseType","setRequestHeader","addEventListener","removeEventListener","polyfill","parseUniappHeaders","toStr","rawBody","requestTask","_globalThis","NativeWebSocket","WebSocket","MozWebSocket","websocket_version","W3CWebSocket","uri","protocols","prop","naiveFallback","__global__","identifier","ApiResponse_1","HttpApi","params","reqUrl","paramStr","setQueryConfig","_str","substring","rnFetch","response2ApiResponse","apiResponse","msg","ApiResponse","succeed","isSucceed","MessagePack_1","from","conversationType","MessagePack","buildTextMessagePack","buildImageMessagePack","buildAudioMessagePack","buildVideoMessagePack","buildEmojiMessagePack","buildFileMessagePack","buildLocationMessagePack","buildCustomerMessagePack","messageId","messageRandom","RangeInteger","messageTime","min","max","range","floor","toId","groupId","content","messageBody"],"mappings":"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","file":"lim-sdk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"imsdk\"] = factory();\n\telse\n\t\troot[\"imsdk\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nexports.__esModule = true;\nvar Logger = /** @class */ (function () {\n    function Logger() {\n    }\n    Logger.info = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (Logger.debug) {\n            console.info.apply(console, __spreadArrays([new Date().toISOString() + \" : \" + message], optionalParams));\n        }\n    };\n    Logger.infoTag = function (tag, message) {\n        var optionalParams = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            optionalParams[_i - 2] = arguments[_i];\n        }\n        if (Logger.debug) {\n            console.info.apply(console, __spreadArrays([new Date().toISOString() + \" \" + tag + \" : \" + message], optionalParams));\n        }\n    };\n    Logger.error = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (Logger.debug) {\n            console.error.apply(console, __spreadArrays([new Date().toISOString() + \" : \" + message], optionalParams));\n        }\n    };\n    Logger.errorTag = function (tag, message) {\n        var optionalParams = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            optionalParams[_i - 2] = arguments[_i];\n        }\n        if (Logger.debug) {\n            console.error.apply(console, __spreadArrays([new Date().toISOString() + \" \" + tag + \"  : \" + message], optionalParams));\n        }\n    };\n    Logger.trace = function (e) {\n        if (Logger.debug) {\n            if (e instanceof Error) {\n                console.error(e.message + \" \\n \" + (e.stack !== undefined ? e.stack : ''));\n            }\n            else {\n                console.error(e);\n            }\n        }\n    };\n    Logger.debug = true;\n    return Logger;\n}());\nexports[\"default\"] = Logger;\n","\"use strict\";\nexports.__esModule = true;\nvar Beans = /** @class */ (function () {\n    function Beans() {\n    }\n    Beans.to = function (target) {\n        return JSON.parse(JSON.stringify(target));\n    };\n    Beans.bean = function (json) {\n        return JSON.parse(json);\n    };\n    Beans.copy = function (target) {\n        return Beans.to(target);\n    };\n    Beans.replace = function (target, replaceJSON) {\n        var r = Beans.to(target);\n        for (var v in replaceJSON) {\n            r[v] = replaceJSON[v];\n        }\n        return r;\n    };\n    Beans.toMapByKey = function (arrs, key) {\n        var result = {};\n        arrs.forEach(function (v) {\n            if (v.hasOwnProperty(key)) {\n                result[key] = v;\n            }\n        });\n        return result;\n    };\n    Beans.json = function (target) {\n        return JSON.stringify(target);\n    };\n    Beans.strEmpty = function (s) {\n        return !!s;\n    };\n    Beans.strNotEmpty = function (s) {\n        return !s;\n    };\n    Beans.isEmpty = function (str) {\n        if (str === null ||\n            str === '' ||\n            str === undefined ||\n            str.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Beans.uuid = function () {\n        return (Math.random() * 36).toString(36).slice(2) + new Date().getTime().toString();\n    };\n    return Beans;\n}());\nexports[\"default\"] = Beans;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.imClient = exports.getLen = exports.limLogin = exports.ImClient = exports.sleep = exports.State = void 0;\nvar Logger_1 = require(\"../log/Logger\");\nvar ByteBuffer_1 = require(\"../codec/ByteBuffer\");\nvar LoginPack_1 = require(\"../pack/LoginPack\");\nvar WebToolkit_1 = require(\"../common/WebToolkit\");\nvar websocket_1 = require(\"websocket\");\nvar RequestBase_1 = require(\"../model/RequestBase\");\nvar RequestParams_1 = require(\"../model/RequestParams\");\nvar HttpApi_1 = require(\"./HttpApi\");\nvar utils_1 = require(\"../common/utils\");\nvar Command_1 = require(\"../common/Command\");\nvar CreateMessage_1 = require(\"../utils/CreateMessage\");\nvar ConversationType_1 = require(\"../common/ConversationType\");\nvar loginTimeout = 10 * 1000; // 10 seconds\nvar heartbeatInterval = 10 * 1000; // seconds\nvar firstMonitorSocket = false; // 第一次监听socket\nvar State;\n(function (State) {\n    State[State[\"INIT\"] = 0] = \"INIT\";\n    State[State[\"CONNECTING\"] = 1] = \"CONNECTING\";\n    State[State[\"CONNECTED\"] = 2] = \"CONNECTED\";\n    State[State[\"RECONNECTING\"] = 3] = \"RECONNECTING\";\n    State[State[\"CLOSEING\"] = 4] = \"CLOSEING\";\n    State[State[\"CLOSED\"] = 5] = \"CLOSED\";\n})(State = exports.State || (exports.State = {}));\nvar TimeUnit;\n(function (TimeUnit) {\n    TimeUnit[TimeUnit[\"Second\"] = 1000] = \"Second\";\n    TimeUnit[TimeUnit[\"Millisecond\"] = 1] = \"Millisecond\";\n})(TimeUnit || (TimeUnit = {}));\nexports.sleep = function (second, Unit) {\n    if (Unit === void 0) { Unit = TimeUnit.Second; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve, _) {\n                    setTimeout(function () {\n                        resolve();\n                    }, second * Unit);\n                })];\n        });\n    });\n};\nvar ImClient = /** @class */ (function () {\n    function ImClient() {\n        this.url = \"\";\n        this.version = 1;\n        this.clientType = 1;\n        this.listeners = null;\n        this.state = State.INIT;\n        // lastOfflineMessageSequence: number = 0;\n        // offlineMessageList: Array<any> = new Array<any>()\n        this.httpUrl = \"http://127.0.0.1:8000\";\n    }\n    ImClient.prototype.getRequestBase = function () {\n        return new RequestBase_1.RequestBase(this.appId, this.clientType, this.imei);\n    };\n    ImClient.prototype.isInit = function () {\n        return this.state == State.CONNECTED;\n    };\n    ImClient.prototype.getRequestParams = function () {\n        return new RequestParams_1.RequestParams(this.appId, this.userId, this.userSign);\n    };\n    ImClient.prototype.init = function (appId, userId, userSign, listeners, callback) {\n        return __awaiter(this, void 0, void 0, function () {\n            var self, api, resp, ip, port, req, _a, success, err, conn;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        self = this;\n                        self.appId = appId;\n                        self.listeners = listeners;\n                        self.imei = WebToolkit_1[\"default\"].getDeviceInfo().system;\n                        self.imeiLength = exports.getLen(self.imei);\n                        self.userId = userId;\n                        this.userSign = userSign;\n                        this.imeiLength = self.imeiLength;\n                        if (!utils_1[\"default\"].isEmpty(this.url)) return [3 /*break*/, 2];\n                        Logger_1[\"default\"].info(\"获取im地址\");\n                        api = new HttpApi_1[\"default\"](this.httpUrl);\n                        return [4 /*yield*/, api.call(\"/user/login\", {}, {\n                                clientType: this.clientType,\n                                appId: this.appId,\n                                userId: this.userId\n                            })\n                            // console.log(resp)\n                        ];\n                    case 1:\n                        resp = _b.sent();\n                        // console.log(resp)\n                        if (resp.isFailed()) {\n                            Logger_1[\"default\"].info(\"登录失败：获取im地址失败\");\n                            return [2 /*return*/];\n                        }\n                        ip = resp.data.ip;\n                        port = resp.data.port;\n                        this.url = \"ws://\" + ip + \":\" + port + \"/ws\";\n                        _b.label = 2;\n                    case 2:\n                        req = new LoginPack_1.LoginPack(self.appId, self.userId, 1);\n                        return [4 /*yield*/, exports.limLogin(self.url, req, self)];\n                    case 3:\n                        _a = _b.sent(), success = _a.success, err = _a.err, conn = _a.conn;\n                        if (success) {\n                            if (!firstMonitorSocket) {\n                                firstMonitorSocket = true;\n                            }\n                            //登录成功以后操作\n                            conn.onerror = function (error) {\n                                Logger_1[\"default\"].info(\"websocket error: \", error);\n                                // 加入socket 连接事件\n                                if (typeof exports.imClient.listeners.onSocketErrorEvent === 'function') {\n                                    exports.imClient.listeners.onSocketErrorEvent(error);\n                                }\n                                //异步方法，自动重连\n                                _this.errorHandler(error, req);\n                            };\n                            conn.onclose = function (e) {\n                                Logger_1[\"default\"].info(\"event[onclose] fired\");\n                                if (self.state == State.CLOSEING) {\n                                    _this.onclose(\"logout\");\n                                    return;\n                                }\n                                // socket断开事件 连接事件\n                                if (typeof exports.imClient.listeners.onSocketCloseEvent === 'function') {\n                                    exports.imClient.listeners.onSocketCloseEvent();\n                                }\n                                // 异步方法 自动重连\n                                _this.errorHandler(new Error(e.reason), req);\n                            };\n                            conn.onmessage = function (evt) {\n                                var bytebuf = new ByteBuffer_1[\"default\"](evt.data);\n                                var byteBuffer = bytebuf.int32().int32().unpack();\n                                var command = byteBuffer[0]; //解析command\n                                var bodyLen = byteBuffer[1]; //解析bodylen\n                                var unpack = bytebuf.vstring(null, bodyLen).unpack(); //解析出字符串\n                                var msgBody = unpack[2];\n                                console.log(\"sdk收到服务端数据：\" + msgBody);\n                                if (command === Command_1.MessageCommand.MSG_P2P) {\n                                    //单聊消息收发\n                                    if (typeof exports.imClient.listeners.onP2PMessage === 'function') {\n                                        exports.imClient.listeners.onP2PMessage(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.MessageCommand.MSG_ACK) {\n                                    //单聊消息发送成功ACK\n                                    if (typeof exports.imClient.listeners.onMessageAck === 'function') {\n                                        exports.imClient.listeners.onMessageAck(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.MessageCommand.MSG_RECEIVE_ACK) {\n                                    // 消息接收成功ACK\n                                    if (typeof exports.imClient.listeners.onMessageReceiveAck === 'function') {\n                                        exports.imClient.listeners.onMessageReceiveAck(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.MessageCommand.MSG_READED_NOTIFY) {\n                                    // 消息已读通知给同步端\n                                    if (typeof exports.imClient.listeners.onMessageReadedNotify === 'function') {\n                                        exports.imClient.listeners.onMessageReadedNotify(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.MessageCommand.MSG_READED_RECEIPT) {\n                                    // 消息已读回执\n                                    if (typeof exports.imClient.listeners.onMessageReadedReceipt === 'function') {\n                                        exports.imClient.listeners.onMessageReadedReceipt(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.MessageCommand.MSG_RECALL_NOTIFY) {\n                                    // 消息撤回通知\n                                    if (typeof exports.imClient.listeners.onMessageRecallNotify === 'function') {\n                                        exports.imClient.listeners.onMessageRecallNotify(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.MessageCommand.MSG_RECALL_ACK) {\n                                    // 消息撤回ACK\n                                    if (typeof exports.imClient.listeners.onMessageRecallAck === 'function') {\n                                        exports.imClient.listeners.onMessageRecallAck(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_ADD) {\n                                    // 添加好友通知\n                                    if (typeof exports.imClient.listeners.onAddFriend === 'function') {\n                                        exports.imClient.listeners.onAddFriend(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_UPDATE) {\n                                    // 更新好友通知\n                                    if (typeof exports.imClient.listeners.onUpdateFriend === 'function') {\n                                        exports.imClient.listeners.onUpdateFriend(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_DELETE) {\n                                    // 删除好友通知\n                                    if (typeof exports.imClient.listeners.onDeleteFriend === 'function') {\n                                        exports.imClient.listeners.onDeleteFriend(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_REQUEST) {\n                                    // 好友申请通知\n                                    if (typeof exports.imClient.listeners.onFriendRequest === 'function') {\n                                        exports.imClient.listeners.onFriendRequest(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_REQUEST_READ) {\n                                    // 好友申请已读通知\n                                    if (typeof exports.imClient.listeners.onReadFriendRequest === 'function') {\n                                        exports.imClient.listeners.onReadFriendRequest(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_REQUEST_APPROVE) {\n                                    if (typeof exports.imClient.listeners.onApproveFriendRequest === 'function') {\n                                        exports.imClient.listeners.onApproveFriendRequest(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_BLACK_ADD) {\n                                    // 添加黑名单通知\n                                    if (typeof exports.imClient.listeners.onBlackFriend === 'function') {\n                                        exports.imClient.listeners.onBlackFriend(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_BLACK_DELETE) {\n                                    // 删除黑名单通知\n                                    if (typeof exports.imClient.listeners.onDeleteBlackFriend === 'function') {\n                                        exports.imClient.listeners.onDeleteBlackFriend(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_GROUP_ADD) {\n                                    // 添加好友分组通知\n                                    if (typeof exports.imClient.listeners.onAddFriendGroup === 'function') {\n                                        exports.imClient.listeners.onAddFriendGroup(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_GROUP_DELETE) {\n                                    // 删除好友分组通知\n                                    if (typeof exports.imClient.listeners.onDeleteFriendGroup === 'function') {\n                                        exports.imClient.listeners.onDeleteFriendGroup(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_GROUP_MEMBER_ADD) {\n                                    // 添加好友分组成员通知\n                                    if (typeof exports.imClient.listeners.onAddFriendGroupMember === 'function') {\n                                        exports.imClient.listeners.onAddFriendGroupMember(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_GROUP_MEMBER_DELETE) {\n                                    // 删除好友分组成员通知\n                                    if (typeof exports.imClient.listeners.onDeleteFriendGroupMember === 'function') {\n                                        exports.imClient.listeners.onDeleteFriendGroupMember(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.FriendshipEventCommand.FRIEND_ALL_DELETE) {\n                                    // 删除所有好友通知\n                                    if (typeof exports.imClient.listeners.onDeleteAllFriend === 'function') {\n                                        exports.imClient.listeners.onDeleteAllFriend(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.JOIN_GROUP) {\n                                    // 推送申请入群通知\n                                    if (typeof exports.imClient.listeners.onJoinGroup === 'function') {\n                                        exports.imClient.listeners.onJoinGroup(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.ADDED_MEMBER) {\n                                    // 推送添加群成员通知\n                                    if (typeof exports.imClient.listeners.onAddGroupMember === 'function') {\n                                        exports.imClient.listeners.onAddGroupMember(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.CREATED_GROUP) {\n                                    // 推送创建群组通知\n                                    if (typeof exports.imClient.listeners.onCreateGroup === 'function') {\n                                        exports.imClient.listeners.onCreateGroup(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.UPDATED_GROUP) {\n                                    // 推送更新群组通知\n                                    if (typeof exports.imClient.listeners.onUpdateGroup === 'function') {\n                                        exports.imClient.listeners.onUpdateGroup(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.EXIT_GROUP) {\n                                    // 推送退出群组通知\n                                    if (typeof exports.imClient.listeners.onExitGroup === 'function') {\n                                        exports.imClient.listeners.onExitGroup(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.UPDATED_MEMBER) {\n                                    // 推送修改群成员通知\n                                    if (typeof exports.imClient.listeners.onUpdateGroupMember === 'function') {\n                                        exports.imClient.listeners.onUpdateGroupMember(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.DELETED_MEMBER) {\n                                    // 推送删除群成员通知\n                                    if (typeof exports.imClient.listeners.onDeleteGroupMember === 'function') {\n                                        exports.imClient.listeners.onDeleteGroupMember(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.DESTROY_GROUP) {\n                                    // 推送解散群通知\n                                    if (typeof exports.imClient.listeners.onDestroyGroup === 'function') {\n                                        exports.imClient.listeners.onDestroyGroup(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.TRANSFER_GROUP) {\n                                    // 推送转让群主通知\n                                    if (typeof exports.imClient.listeners.onTransferGroup === 'function') {\n                                        exports.imClient.listeners.onTransferGroup(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.MUTE_GROUP) {\n                                    // 推送禁言群通知\n                                    if (typeof exports.imClient.listeners.onMuteGroup === 'function') {\n                                        exports.imClient.listeners.onMuteGroup(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.SPEAK_GROUP_MEMBER) {\n                                    // 推送禁言群成员通知\n                                    if (typeof exports.imClient.listeners.onMuteGroupMember === 'function') {\n                                        exports.imClient.listeners.onMuteGroupMember(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.GROUP_REQUEST_APPROVE) {\n                                    // 推送审批群申请通知\n                                    if (typeof exports.imClient.listeners.onApproveGroupRequest === 'function') {\n                                        exports.imClient.listeners.onApproveGroupRequest(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.GROUP_REQUEST_READ) {\n                                    // 推送群申请已读通知\n                                    if (typeof exports.imClient.listeners.onReadGroupRequest === 'function') {\n                                        exports.imClient.listeners.onReadGroupRequest(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.MSG_GROUP) {\n                                    // 群聊消息收发\n                                    if (typeof exports.imClient.listeners.onGroupMessage === 'function') {\n                                        exports.imClient.listeners.onGroupMessage(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.MSG_GROUP_READED_NOTIFY) {\n                                    // 群聊消息已读通知\n                                    if (typeof exports.imClient.listeners.onGroupMessageReadedNotify === 'function') {\n                                        exports.imClient.listeners.onGroupMessageReadedNotify(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.MSG_GROUP_READED_RECEIPT) {\n                                    // 群聊消息已读回执\n                                    if (typeof exports.imClient.listeners.onGroupMessageReadedReceipt === 'function') {\n                                        exports.imClient.listeners.onGroupMessageReadedReceipt(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.GroupEventCommand.GROUP_MSG_ACK) {\n                                    // 群聊消息ACK\n                                    if (typeof exports.imClient.listeners.onGroupMessageAck === 'function') {\n                                        exports.imClient.listeners.onGroupMessageAck(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.UserEventCommand.USER_MODIFY) {\n                                    // 用户信息变更通知\n                                    if (typeof exports.imClient.listeners.onUserModify === 'function') {\n                                        exports.imClient.listeners.onUserModify(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.UserEventCommand.USER_ONLINE_STATUS_CHANGE_NOTIFY) {\n                                    // 用户在线状态更改通知\n                                    if (typeof exports.imClient.listeners.onUserOnlineStatusChangeNotify === 'function') {\n                                        exports.imClient.listeners.onUserOnlineStatusChangeNotify(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.UserEventCommand.USER_ONLINE_STATUS_CHANGE_NOTIFY_SYNC) {\n                                    // 用户在线状态通知同步报文\n                                    if (typeof exports.imClient.listeners.onUserOnlineStatusChangeNotifySync === 'function') {\n                                        exports.imClient.listeners.onUserOnlineStatusChangeNotifySync(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.UserEventCommand.USER_CUSTOM_STATUS_CHANGE_NOTIFY) {\n                                    // 用户自身状态更改通知报文\n                                    if (typeof exports.imClient.listeners.onUserCustomStatusChangeNotify === 'function') {\n                                        exports.imClient.listeners.onUserCustomStatusChangeNotify(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.ConversationEventCommand.CONVERSATION_DELETE) {\n                                    // 删除会话通知\n                                    if (typeof exports.imClient.listeners.onConversationDelete === 'function') {\n                                        exports.imClient.listeners.onConversationDelete(msgBody);\n                                    }\n                                }\n                                else if (command === Command_1.ConversationEventCommand.CONVERSATION_UPDATE) {\n                                    // 沟通信会话通知\n                                    if (typeof exports.imClient.listeners.onConversationUpdate === 'function') {\n                                        exports.imClient.listeners.onConversationUpdate(msgBody);\n                                    }\n                                }\n                            };\n                            this.conn = conn;\n                            this.state = State.CONNECTED;\n                            //拉取离线消息\n                            // this.loadOfflineMessage();\n                            //心跳包\n                            this.heartbeatLoop(this.conn);\n                            if (typeof exports.imClient.listeners.onLogin === 'function') {\n                                exports.imClient.listeners.onLogin(this.userId);\n                            }\n                            callback(self);\n                        }\n                        else {\n                            Logger_1[\"default\"].error(err === null || err === void 0 ? void 0 : err.message);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ImClient.prototype.buildMessagePack = function (command, messagePack) {\n        var jsonData = JSON.stringify(messagePack);\n        var bodyLen = exports.getLen(jsonData);\n        var pack = new ByteBuffer_1[\"default\"](null, 0);\n        pack.int32(command).int32(this.version).int32(this.clientType)\n            .int32(0x0)\n            .int32(this.appId)\n            .int32(this.imeiLength)\n            .int32(bodyLen)\n            .vstring(this.imei, this.imeiLength)\n            .vstring(jsonData, bodyLen);\n        return pack;\n    };\n    // 4. 自动重连\n    ImClient.prototype.errorHandler = function (error, req) {\n        return __awaiter(this, void 0, void 0, function () {\n            var index, _a, success, err, conn, error_1;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        // 如果是主动断开连接，就没有必要自动重连\n                        // 比如收到被踢，或者主动调用logout()方法\n                        if (this.state == State.CLOSED || this.state == State.CLOSEING) {\n                            return [2 /*return*/];\n                        }\n                        this.state = State.RECONNECTING;\n                        if (typeof exports.imClient.listeners.onSocketReConnectEvent === 'function') {\n                            exports.imClient.listeners.onSocketReConnectEvent();\n                        }\n                        index = 0;\n                        _b.label = 1;\n                    case 1:\n                        if (!(index < 10)) return [3 /*break*/, 7];\n                        return [4 /*yield*/, exports.sleep(3)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _b.trys.push([3, 5, , 6]);\n                        Logger_1[\"default\"].info(\"try to relogin\");\n                        return [4 /*yield*/, exports.limLogin(this.url, req, this)];\n                    case 4:\n                        _a = _b.sent(), success = _a.success, err = _a.err, conn = _a.conn;\n                        if (success) {\n                            if (typeof exports.imClient.listeners.onSocketReConnectSuccessEvent === 'function') {\n                                exports.imClient.listeners.onSocketReConnectSuccessEvent();\n                            }\n                            return [2 /*return*/];\n                        }\n                        Logger_1[\"default\"].info(err);\n                        return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _b.sent();\n                        Logger_1[\"default\"].info(error_1);\n                        return [3 /*break*/, 6];\n                    case 6:\n                        index++;\n                        return [3 /*break*/, 1];\n                    case 7:\n                        this.onclose(\"reconnect timeout\");\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // 表示连接中止\n    ImClient.prototype.onclose = function (reason) {\n        if (this.state == State.CLOSED) {\n            return;\n        }\n        this.state = State.CLOSED;\n        Logger_1[\"default\"].info(\"connection closed due to \" + reason);\n        this.conn = undefined;\n        this.userId = \"\";\n        // 加入socket 关闭事件\n        if (typeof exports.imClient.listeners.onSocketErrorEvent === 'function') {\n            exports.imClient.listeners.onSocketCloseEvent();\n        }\n    };\n    ImClient.prototype.getSingleUserInfo = function (uid) {\n        var _this = this;\n        return new Promise(function (resolve, _) {\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\n            var resp = api.call(\"/user/data/getSingleUserInfo\", _this.getRequestParams(), { userId: uid });\n            resolve(resp);\n        });\n    };\n    ImClient.prototype.syncGetUserInfo = function (userId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var api;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        api = new HttpApi_1[\"default\"](this.httpUrl);\n                        return [4 /*yield*/, api.call(\"/user/getUserInfo\", this.getRequestParams(), { userIds: userId })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    ImClient.prototype.getUserInfo = function (userId) {\n        var _this = this;\n        return new Promise(function (resolve, _) {\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\n            var resp = api.call(\"/user/data/getUserInfo\", _this.getRequestParams(), { userIds: userId });\n            resolve(resp);\n        });\n    };\n    ImClient.prototype.getAllFriend = function () {\n        var _this = this;\n        return new Promise(function (resolve, _) {\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\n            var resp = api.call(\"/friendship/getAllFriendShip\", _this.getRequestParams(), { fromId: _this.userId });\n            resolve(resp);\n        });\n    };\n    // 2、心跳\n    ImClient.prototype.heartbeatLoop = function (conn) {\n        var _this = this;\n        var start = Date.now();\n        var loop = function () {\n            if (_this.state != State.CONNECTED) {\n                Logger_1[\"default\"].error(\"heartbeatLoop exited\");\n                return;\n            }\n            if (Date.now() - start >= heartbeatInterval) {\n                Logger_1[\"default\"].info(\">>> send ping ;\");\n                start = Date.now();\n                var pingPack = exports.imClient.buildMessagePack(Command_1.SystemCommand.PING, {});\n                conn.send(pingPack.pack(false));\n            }\n            setTimeout(loop, 500);\n        };\n        setTimeout(loop, 500);\n    };\n    // 发送单聊文本消息\n    ImClient.prototype.sendP2PTextMessage = function (to, text) {\n        var pack = CreateMessage_1.createTextMessage(this.appId, this.userId, to, text, ConversationType_1[\"default\"].P2PMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.MessageCommand.MSG_P2P, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送单聊图片消息\n    ImClient.prototype.sendP2PImageMessage = function (to, image) {\n        var pack = CreateMessage_1.createImageMessage(this.appId, this.userId, to, image, ConversationType_1[\"default\"].P2PMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.MessageCommand.MSG_P2P, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送单聊语音消息\n    ImClient.prototype.sendP2PAudioMessage = function (to, audio) {\n        var pack = CreateMessage_1.createAudioMessage(this.appId, this.userId, to, audio, ConversationType_1[\"default\"].P2PMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.MessageCommand.MSG_P2P, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送单聊视频消息\n    ImClient.prototype.sendP2PVideoMessage = function (to, video) {\n        var pack = CreateMessage_1.createVideoMessage(this.appId, this.userId, to, video, ConversationType_1[\"default\"].P2PMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.MessageCommand.MSG_P2P, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送单聊表情消息\n    ImClient.prototype.sendP2PEmojiMessage = function (to, emoji) {\n        var pack = CreateMessage_1.createEmojiMessage(this.appId, this.userId, to, emoji, ConversationType_1[\"default\"].P2PMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.MessageCommand.MSG_P2P, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送单聊文件消息\n    ImClient.prototype.sendP2PFileMessage = function (to, file) {\n        var pack = CreateMessage_1.createFileMessage(this.appId, this.userId, to, file, ConversationType_1[\"default\"].P2PMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.MessageCommand.MSG_P2P, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送单聊位置消息\n    ImClient.prototype.sendP2PLocationMessage = function (to, location) {\n        var pack = CreateMessage_1.createLocationMessage(this.appId, this.userId, to, location, ConversationType_1[\"default\"].P2PMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.MessageCommand.MSG_P2P, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送单聊自定义消息\n    ImClient.prototype.sendP2PCustomerMessage = function (to, type, custom) {\n        var pack = CreateMessage_1.createCustomerMessage(this.appId, this.userId, to, type, custom, ConversationType_1[\"default\"].P2PMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.MessageCommand.MSG_P2P, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送群聊文本消息\n    ImClient.prototype.sendGroupTextMessage = function (to, text) {\n        var pack = CreateMessage_1.createTextMessage(this.appId, this.userId, to, text, ConversationType_1[\"default\"].GroupMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.GroupEventCommand.MSG_GROUP, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送群聊图片消息\n    ImClient.prototype.sendGroupImageMessage = function (to, image) {\n        var pack = CreateMessage_1.createImageMessage(this.appId, this.userId, to, image, ConversationType_1[\"default\"].GroupMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.GroupEventCommand.MSG_GROUP, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送群聊语音消息\n    ImClient.prototype.sendGroupAudioMessage = function (to, audio) {\n        var pack = CreateMessage_1.createAudioMessage(this.appId, this.userId, to, audio, ConversationType_1[\"default\"].GroupMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.GroupEventCommand.MSG_GROUP, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送群聊视频消息\n    ImClient.prototype.sendGroupVideoMessage = function (to, video) {\n        var pack = CreateMessage_1.createVideoMessage(this.appId, this.userId, to, video, ConversationType_1[\"default\"].GroupMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.GroupEventCommand.MSG_GROUP, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送群聊表情消息\n    ImClient.prototype.sendGroupEmojiMessage = function (to, emoji) {\n        var pack = CreateMessage_1.createEmojiMessage(this.appId, this.userId, to, emoji, ConversationType_1[\"default\"].GroupMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.GroupEventCommand.MSG_GROUP, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送群聊文件消息\n    ImClient.prototype.sendGroupFileMessage = function (to, file) {\n        var pack = CreateMessage_1.createFileMessage(this.appId, this.userId, to, file, ConversationType_1[\"default\"].GroupMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.GroupEventCommand.MSG_GROUP, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送群聊位置消息\n    ImClient.prototype.sendGroupLocationMessage = function (to, location) {\n        var pack = CreateMessage_1.createLocationMessage(this.appId, this.userId, to, location, ConversationType_1[\"default\"].GroupMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.GroupEventCommand.MSG_GROUP, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    // 发送群聊自定义消息\n    ImClient.prototype.sendGroupCustomerMessage = function (to, type, custom) {\n        var pack = CreateMessage_1.createCustomerMessage(this.appId, this.userId, to, type, custom, ConversationType_1[\"default\"].GroupMessage);\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.GroupEventCommand.MSG_GROUP, pack);\n        if (this.conn) {\n            this.conn.send(p2pPack.pack(false));\n        }\n    };\n    ImClient.prototype.getUserId = function () {\n        return this.userId;\n    };\n    return ImClient;\n}());\nexports.ImClient = ImClient;\nexports.limLogin = function (url, req, imClient) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        return [2 /*return*/, new Promise(function (resolve, _) {\n                var conn = new websocket_1.w3cwebsocket(url);\n                conn.binaryType = \"arraybuffer\";\n                Logger_1[\"default\"].info(\"limLogin\");\n                // 设置一个登陆超时器\n                var tr = setTimeout(function () {\n                    clearTimeout(tr);\n                    resolve({ success: false, err: new Error(\"timeout\"), conn: conn });\n                }, loginTimeout);\n                conn.onopen = function () {\n                    if (conn.readyState == websocket_1.w3cwebsocket.OPEN) {\n                        // 加入socket 连接事件\n                        if (typeof imClient.listeners.onSocketConnectEvent === 'function') {\n                            imClient.listeners.onSocketConnectEvent(url, req);\n                        }\n                        Logger_1[\"default\"].info(\"\\u5F00\\u542F\\u8FDE\\u63A5\");\n                        //登录数据包\n                        var data = {\n                            \"userId\": req.userId\n                        };\n                        var loginPack = imClient.buildMessagePack(Command_1.SystemCommand.LOGIN, data);\n                        conn.send(loginPack.pack(false));\n                    }\n                };\n                conn.onerror = function (error) {\n                    clearTimeout(tr);\n                    Logger_1[\"default\"].error(error);\n                    resolve({ success: false, err: error, conn: conn });\n                };\n                conn.onmessage = function (evt) {\n                    if (typeof evt.data === 'string') {\n                        Logger_1[\"default\"].info(\"Received: '\" + evt.data + \"'\");\n                        return;\n                    }\n                    clearTimeout(tr);\n                    var bytebuf = new ByteBuffer_1[\"default\"](evt.data);\n                    var byteBuffer = bytebuf.int32().int32().unpack();\n                    var command = byteBuffer[0];\n                    var bodyLen = byteBuffer[1];\n                    if (command == Command_1.SystemCommand.LOGIN_ACK) {\n                        resolve({ success: true, conn: conn });\n                    }\n                };\n            })];\n    });\n}); };\nexports.getLen = function (str) {\n    var len = 0;\n    for (var i = 0; i < str.length; i++) {\n        var c = str.charCodeAt(i);\n        //单字节加1\n        if ((c >= 0x0001 && c <= 0x007e) || (0xff60 <= c && c <= 0xff9f)) {\n            len++;\n        }\n        else {\n            len += 3;\n        }\n    }\n    return len;\n};\nexports.imClient = new ImClient();\n","\"use strict\";\nexports.__esModule = true;\nvar Fetch_1 = require(\"../common/Fetch\");\nvar Logger_1 = require(\"../log/Logger\");\nvar Base64 = {\n    _keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n    encode: function (e) {\n        var t = \"\";\n        var n, r, i, s, o, u, a;\n        var f = 0;\n        e = Base64._utf8_encode(e);\n        while (f < e.length) {\n            n = e.charCodeAt(f++);\n            r = e.charCodeAt(f++);\n            i = e.charCodeAt(f++);\n            s = n >> 2;\n            o = (n & 3) << 4 | r >> 4;\n            u = (r & 15) << 2 | i >> 6;\n            a = i & 63;\n            if (isNaN(r)) {\n                u = a = 64;\n            }\n            else if (isNaN(i)) {\n                a = 64;\n            }\n            t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a);\n        }\n        return t;\n    },\n    decode: function (e) {\n        var t = \"\";\n        var n, r, i;\n        var s, o, u, a;\n        var f = 0;\n        e = e.replace(/[^A-Za-z0-9+/=]/g, \"\");\n        while (f < e.length) {\n            s = this._keyStr.indexOf(e.charAt(f++));\n            o = this._keyStr.indexOf(e.charAt(f++));\n            u = this._keyStr.indexOf(e.charAt(f++));\n            a = this._keyStr.indexOf(e.charAt(f++));\n            n = s << 2 | o >> 4;\n            r = (o & 15) << 4 | u >> 2;\n            i = (u & 3) << 6 | a;\n            t = t + String.fromCharCode(n);\n            if (u != 64) {\n                t = t + String.fromCharCode(r);\n            }\n            if (a != 64) {\n                t = t + String.fromCharCode(i);\n            }\n        }\n        t = Base64._utf8_decode(t);\n        return t;\n    },\n    _utf8_encode: function (e) {\n        e = e.replace(/rn/g, \"n\");\n        var t = \"\";\n        for (var n = 0; n < e.length; n++) {\n            var r = e.charCodeAt(n);\n            if (r < 128) {\n                t += String.fromCharCode(r);\n            }\n            else if (r > 127 && r < 2048) {\n                t += String.fromCharCode(r >> 6 | 192);\n                t += String.fromCharCode(r & 63 | 128);\n            }\n            else {\n                t += String.fromCharCode(r >> 12 | 224);\n                t += String.fromCharCode(r >> 6 & 63 | 128);\n                t += String.fromCharCode(r & 63 | 128);\n            }\n        }\n        return t;\n    },\n    _utf8_decode: function (e) {\n        var t = \"\";\n        var n = 0;\n        var r = 0;\n        var c1 = 0;\n        var c2 = 0;\n        while (n < e.length) {\n            r = e.charCodeAt(n);\n            if (r < 128) {\n                t += String.fromCharCode(r);\n                n++;\n            }\n            else if (r > 191 && r < 224) {\n                c2 = e.charCodeAt(n + 1);\n                t += String.fromCharCode((r & 31) << 6 | c2 & 63);\n                n += 2;\n            }\n            else {\n                c2 = e.charCodeAt(n + 1);\n                var c3 = e.charCodeAt(n + 2);\n                t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);\n                n += 3;\n            }\n        }\n        return t;\n    }\n};\nvar WebToolkit = /** @class */ (function () {\n    function WebToolkit() {\n    }\n    // 获取浏览器信息\n    WebToolkit.getBrowserInfo = function () {\n        var agent = navigator.userAgent.toLowerCase();\n        var system = agent.split(\" \")[1].split(\" \")[0].split(\"(\")[1];\n        var REGSTR_EDGE = /edge\\/[\\d.]+/gi;\n        var REGSTR_IE = /trident\\/[\\d.]+/gi;\n        var OLD_IE = /msie\\s[\\d.]+/gi;\n        var REGSTR_FF = /firefox\\/[\\d.]+/gi;\n        var REGSTR_CHROME = /chrome\\/[\\d.]+/gi;\n        var REGSTR_SAF = /safari\\/[\\d.]+/gi;\n        var REGSTR_OPERA = /opr\\/[\\d.]+/gi;\n        var info = {\n            code: 0,\n            system: system,\n            browser: \"\",\n            browserVersion: \"\"\n        };\n        // IE\n        if (agent.indexOf(\"trident\") > 0) {\n            info.browser = agent.match(REGSTR_IE)[0].split(\"/\")[0];\n            info.browserVersion = agent.match(REGSTR_IE)[0].split(\"/\")[1];\n            return info;\n        }\n        // OLD_IE\n        if (agent.indexOf(\"msie\") > 0) {\n            info.browser = agent.match(OLD_IE)[0].split(\" \")[0];\n            info.browserVersion = agent.match(OLD_IE)[0].split(\" \")[1];\n            return info;\n        }\n        // Edge\n        if (agent.indexOf(\"edge\") > 0) {\n            info.browser = agent.match(REGSTR_EDGE)[0].split(\"/\")[0];\n            info.browserVersion = agent.match(REGSTR_EDGE)[0].split(\"/\")[1];\n            return info;\n        }\n        // firefox\n        if (agent.indexOf(\"firefox\") > 0) {\n            info.browser = agent.match(REGSTR_FF)[0].split(\"/\")[0];\n            info.browserVersion = agent.match(REGSTR_FF)[0].split(\"/\")[1];\n            return info;\n        }\n        // Opera\n        if (agent.indexOf(\"opr\") > 0) {\n            info.browser = agent.match(REGSTR_OPERA)[0].split(\"/\")[0];\n            info.browserVersion = agent.match(REGSTR_OPERA)[0].split(\"/\")[1];\n            return info;\n        }\n        // Safari\n        if (agent.indexOf(\"safari\") > 0 && agent.indexOf(\"chrome\") < 0) {\n            info.browser = agent.match(REGSTR_SAF)[0].split(\"/\")[0];\n            info.browserVersion = agent.match(REGSTR_SAF)[0].split(\"/\")[1];\n            return info;\n        }\n        // Chrome\n        if (agent.indexOf(\"chrome\") > 0) {\n            info.browser = agent.match(REGSTR_CHROME)[0].split(\"/\")[0];\n            info.browserVersion = agent.match(REGSTR_CHROME)[0].split(\"/\")[1];\n            return info;\n        }\n        else {\n            info.code = -1;\n            return info;\n        }\n    };\n    // TODO: 获取小程序设备信息\n    WebToolkit.getWxAppInfo = function () {\n        return {\n            system: 'WxApp',\n            browser: 'WxApp',\n            browserVersion: '1.0'\n        };\n    };\n    // TODO: 获取ReactNative设备信息\n    WebToolkit.getReactNativeInfo = function () {\n        return {\n            system: 'RNNative',\n            browser: 'RNNative',\n            browserVersion: '1.0'\n        };\n    };\n    // TODO: 获取UniApp设备信息\n    WebToolkit.getUniAppInfo = function () {\n        return {\n            system: 'UniApp',\n            browser: 'UniApp',\n            browserVersion: '1.0'\n        };\n    };\n    // 动态加入script 到head 标签处\n    WebToolkit.loadJS = function (url, callback) {\n        var script = document.createElement('script'), fn = callback || function () {\n        };\n        script.type = 'text/javascript';\n        // document.getElementsByTagName('head')[0].children[16].outerHTML.indexOf('http://pv.sohu.com/cityjson?ie=utf-8')\n        var exist = false;\n        for (var v in document.getElementsByTagName('head')[0].children) {\n            var dom = document.getElementsByTagName('head')[0].children[v];\n            if (dom.outerHTML !== undefined && dom.outerHTML.indexOf(url) >= 0) {\n                exist = true;\n            }\n        }\n        if (exist) {\n            fn();\n            return;\n        }\n        //IE\n        if (script.readyState) {\n            script.onreadystatechange = function () {\n                if (script.readyState == 'loaded' || script.readyState == 'complete') {\n                    script.onreadystatechange = null;\n                    fn();\n                }\n            };\n        }\n        else {\n            //其他浏览器\n            script.onload = function () {\n                fn();\n            };\n        }\n        script.src = url;\n        document.getElementsByTagName('head')[0].appendChild(script);\n    };\n    // 获取当前ip信息(fetch方式)\n    WebToolkit.getIpInfoByFetch = function (callback) {\n        var url = 'http://pv.sohu.com/cityjson?ie=utf-8';\n        var fetch = Fetch_1[\"default\"].getFetchToolkit();\n        var request = { method: \"GET\", mode: \"cors\", headers: { \"Content-Type\": \"application/json\" } };\n        return fetch(url, request).then(function (response) {\n            return response.text();\n        }).then(function (res) {\n            if (typeof callback === 'function') {\n                var currentCity = eval('_current_city=' + res.replace('var returnCitySN = ', ''));\n                callback(currentCity);\n            }\n        })[\"catch\"](function (e) {\n            Logger_1[\"default\"].trace(e);\n        });\n    };\n    // 获取当前ip信息(动态插入script脚本方式)\n    WebToolkit.getIpInfoByInsertScript = function (callback) {\n        var url = 'http://pv.sohu.com/cityjson?ie=utf-8';\n        WebToolkit.loadJS(url, function () {\n            callback(window['returnCitySN']);\n        });\n    };\n    WebToolkit.getIpInfo = function (callback) {\n        /*WX_APP*/\n        // 小程序的情况需要把pv.sohu.com域名加入白名单中\n        WebToolkit.getIpInfoByFetch(callback);\n        /*WX_APP*/\n        /*WEB_APP*/\n        WebToolkit.getIpInfoByInsertScript(callback);\n        /*WEB_APP*/\n        /*RN_APP*/\n        WebToolkit.getIpInfoByInsertScript(callback);\n        /*RN_APP*/\n        /*UNI_APP*/\n        // 小程序的情况需要把pv.sohu.com域名加入白名单中\n        WebToolkit.getIpInfoByFetch(callback);\n        /*UNI_APP*/\n    };\n    // 获取客户端设备信息\n    WebToolkit.getDeviceInfo = function () {\n        return WebToolkit.getBrowserInfo();\n    };\n    WebToolkit.base64Encode = function (str) {\n        return Base64.encode(str);\n    };\n    WebToolkit.base64Decode = function (str) {\n        return Base64.decode(str);\n    };\n    return WebToolkit;\n}());\nexports[\"default\"] = WebToolkit;\n","\"use strict\";\nexports.__esModule = true;\nvar Fetch = /** @class */ (function () {\n    function Fetch() {\n    }\n    Fetch.getFetchToolkit = function () {\n        var httpFetch;\n        // @ts-ignore\n        if (typeof global.fetch !== 'undefined' && typeof global.fetch === 'function') {\n            // @ts-ignore\n            httpFetch = global.fetch;\n        }\n        else if (typeof fetch === 'function') {\n            httpFetch = fetch; // RN FETCH\n        }\n        else {\n            /*WX_APP*/\n            httpFetch = require(\"wxapp-fetch\");\n            /*WX_APP*/\n            /*WEB_APP*/\n            httpFetch = require(\"isomorphic-fetch\");\n            /*WEB_APP*/\n            /*UNI_APP*/\n            var uniFetch = require(\"../uniapp/http/uni-fetch\");\n            httpFetch = uniFetch.fetch;\n            /*UNI_APP*/\n        }\n        return httpFetch;\n    };\n    return Fetch;\n}());\nexports[\"default\"] = Fetch;\n","\"use strict\";\nexports.__esModule = true;\nvar ConversationType;\n(function (ConversationType) {\n    ConversationType[ConversationType[\"P2PMessage\"] = 0] = \"P2PMessage\";\n    ConversationType[ConversationType[\"GroupMessage\"] = 1] = \"GroupMessage\";\n})(ConversationType || (ConversationType = {}));\nexports[\"default\"] = ConversationType;\n","\"use strict\";\nexports.__esModule = true;\nexports.im = void 0;\nvar ImClient_1 = require(\"./lim/core/ImClient\");\nexports.im = ImClient_1.imClient;\n// if(typeof window !== 'undefined'){\n//     console.log(\"window\");\n// }\n// if(typeof global !== 'undefined'){\n//     console.log(\"global\");\n// }\n// @ts-ignore\nif (typeof uni !== 'undefined') {\n    // console.log(\"uni\");\n    // @ts-ignore\n    uni['im'] = ImClient_1.imClient;\n    // @ts-ignore\n    // uni['im_webtoolkit'] = WebToolkit;\n}\n","\"use strict\";\nexports.__esModule = true;\nvar ByteBuffer = /** @class */ (function () {\n    function ByteBuffer(arrayBuf, offset) {\n        this.Type_Byte = 1;\n        this.Type_Short = 2;\n        this.Type_UShort = 3;\n        this.Type_Int32 = 4;\n        this.Type_UInt32 = 5;\n        this.Type_String = 6; //变长字符串，前两个字节表示长度\n        this.Type_VString = 7; //定长字符串\n        this.Type_Int64 = 8;\n        this.Type_Float = 9;\n        this.Type_Double = 10;\n        this.Type_ByteArray = 11;\n        this._offset = 0;\n        this._list = [];\n        this._littleEndian = false;\n        this._org_buf = arrayBuf ? (arrayBuf.constructor == DataView ? arrayBuf\n            : (arrayBuf.constructor == Uint8Array ? new DataView(arrayBuf.buffer, offset) : new DataView(arrayBuf, offset))) : new DataView(new Uint8Array([]).buffer);\n        this.arrayBuf = arrayBuf;\n        this.offset = offset;\n        // if (!ArrayBuffer.prototype.slice) {\n        //     ArrayBuffer.prototype.slice = function (start, end) {\n        //         var that = new Uint8Array(this);\n        //         if (end == undefined) end = that.length;\n        //         var result = new ArrayBuffer(end - start);\n        //         var resultArray = new Uint8Array(result);\n        //         for (var i = 0; i < resultArray.length; i++)\n        //             resultArray[i] = that[i + start];\n        //         return result;\n        //     }\n        // }\n    }\n    //指定字节序 为BigEndian\n    ByteBuffer.prototype.bigEndian = function () {\n        this._littleEndian = false;\n        return this;\n    };\n    ;\n    //指定字节序 为LittleEndian\n    ByteBuffer.prototype.littleEndianfunction = function () {\n        this._littleEndian = true;\n        return this;\n    };\n    ;\n    ByteBuffer.prototype.utf8Write = function (view, offset, str) {\n        var c = 0;\n        for (var i = 0, l = str.length; i < l; i++) {\n            c = str.charCodeAt(i);\n            if (c < 0x80) {\n                view.setUint8(offset++, c);\n            }\n            else if (c < 0x800) {\n                view.setUint8(offset++, 0xc0 | (c >> 6));\n                view.setUint8(offset++, 0x80 | (c & 0x3f));\n            }\n            else if (c < 0xd800 || c >= 0xe000) {\n                view.setUint8(offset++, 0xe0 | (c >> 12));\n                view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\n                view.setUint8(offset++, 0x80 | (c & 0x3f));\n            }\n            else {\n                i++;\n                c = 0x10000 + (((c & 0x3ff) << 10) | (str.charCodeAt(i) & 0x3ff));\n                view.setUint8(offset++, 0xf0 | (c >> 18));\n                view.setUint8(offset++, 0x80 | (c >> 12) & 0x3f);\n                view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\n                view.setUint8(offset++, 0x80 | (c & 0x3f));\n            }\n        }\n    };\n    // byte (val, index) {\n    //     if (arguments.length == 0) {\n    //         this._list.push(this._org_buf.getUint8(this._offset, this._littleEndian));\n    //         this._offset += 1;\n    //     } else {\n    //         this._list.splice(index != undefined ? index : this._list.length, 0);\n    //         this._offset += 1;\n    //     }\n    //     return this;\n    // };\n    // short(val:number, index:number) {\n    //     if (arguments.length == 0) {\n    //         this._list.push(this._org_buf.getInt16(this._offset, this._littleEndian));\n    //         this._offset += 2;\n    //     } else {\n    //         this._list.splice(index != undefined ? index : this._list.length, 0, this.Type_Short);\n    //         this._offset += 2;\n    //     }\n    //     return this;\n    // };\n    // ushort(val, index) {\n    //     if (arguments.length == 0) {\n    //         this._list.push(this._org_buf.getUint16(this._offset, this._littleEndian));\n    //         this._offset += 2;\n    //     } else {\n    //         // , {t: this.Type_UShort, d: val, l: 2}\n    //         this._list.splice(index != undefined ? index : this._list.length, 0);\n    //         this._offset += 2;\n    //     }\n    //     return this;\n    // };\n    ByteBuffer.prototype.int32 = function (val, index) {\n        if (arguments.length == 0) {\n            this._list.push(this._org_buf.getInt32(this._offset, this._littleEndian));\n            this._offset += 4;\n        }\n        else {\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_Int32, d: val, l: 4 });\n            this._offset += 4;\n        }\n        return this;\n    };\n    ;\n    ByteBuffer.prototype.uint32 = function (val, index) {\n        if (arguments.length == 0) {\n            this._list.push(this._org_buf.getUint32(this._offset, this._littleEndian));\n            this._offset += 4;\n        }\n        else {\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_UInt32, d: val, l: 4 });\n            this._offset += 4;\n        }\n        return this;\n    };\n    ;\n    /**\n     * 新加的方法，获取bytebuffer的长度\n     */\n    ByteBuffer.prototype.blength = function () {\n        return this._offset;\n    };\n    ;\n    /**\n     * 变长字符串 前4个字节表示字符串长度\n     **/\n    ByteBuffer.prototype.string = function (val, index) {\n        if (arguments.length == 0) {\n            var len = this._org_buf.getInt32(this._offset, this._littleEndian);\n            this._offset += 4;\n            this._list.push(this.utf8Read(this._org_buf, this._offset, len));\n            this._offset += len;\n        }\n        else {\n            var len = 0;\n            if (val) {\n                len = this.utf8Length(val);\n            }\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_String, d: val, l: len });\n            this._offset += len + 4;\n        }\n        return this;\n    };\n    ;\n    ByteBuffer.prototype.utf8Length = function (str) {\n        var c = 0, length = 0;\n        for (var i = 0, l = str.length; i < l; i++) {\n            c = str.charCodeAt(i);\n            if (c < 0x80) {\n                length += 1;\n            }\n            else if (c < 0x800) {\n                length += 2;\n            }\n            else if (c < 0xd800 || c >= 0xe000) {\n                length += 3;\n            }\n            else {\n                i++;\n                length += 4;\n            }\n        }\n        return length;\n    };\n    ByteBuffer.prototype.utf8Read = function (view, offset, length) {\n        var string = '', chr = 0;\n        for (var i = offset, end = offset + length; i < end; i++) {\n            var byte = view.getUint8(i);\n            if ((byte & 0x80) === 0x00) {\n                string += String.fromCharCode(byte);\n                continue;\n            }\n            if ((byte & 0xe0) === 0xc0) {\n                string += String.fromCharCode(((byte & 0x0f) << 6) |\n                    (view.getUint8(++i) & 0x3f));\n                continue;\n            }\n            if ((byte & 0xf0) === 0xe0) {\n                string += String.fromCharCode(((byte & 0x0f) << 12) |\n                    ((view.getUint8(++i) & 0x3f) << 6) |\n                    ((view.getUint8(++i) & 0x3f) << 0));\n                continue;\n            }\n            if ((byte & 0xf8) === 0xf0) {\n                chr = ((byte & 0x07) << 18) |\n                    ((view.getUint8(++i) & 0x3f) << 12) |\n                    ((view.getUint8(++i) & 0x3f) << 6) |\n                    ((view.getUint8(++i) & 0x3f) << 0);\n                if (chr >= 0x010000) { // surrogate pair\n                    chr -= 0x010000;\n                    string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\n                }\n                else {\n                    string += String.fromCharCode(chr);\n                }\n                continue;\n            }\n            throw new Error('Invalid byte ' + byte.toString(16));\n        }\n        return string;\n    };\n    /**\n     * 定长字符串 val为null时，读取定长字符串（需指定长度len）\n     **/\n    ByteBuffer.prototype.vstring = function (val, len, index) {\n        if (!len) {\n            throw new Error('vstring must got len argument');\n            return this;\n        }\n        if (val == undefined || val == null) {\n            var vlen = 0; //实际长度\n            for (var i = this._offset; i < this._offset + len; i++) {\n                if (this._org_buf.getUint8(i) > 0)\n                    vlen++;\n            }\n            this._list.push(this.utf8Read(this._org_buf, this._offset, vlen));\n            this._offset += len;\n        }\n        else {\n            this._list.splice(index != undefined ? index : this._list.length, 0, {\n                t: this.Type_VString,\n                d: val,\n                l: len\n            });\n            this._offset += len;\n        }\n        return this;\n    };\n    ;\n    ByteBuffer.prototype.int64 = function (val, index) {\n        if (arguments.length == 0) {\n            this._list.push(this._org_buf.getFloat64(this._offset, this._littleEndian));\n            this._offset += 8;\n        }\n        else {\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_Int64, d: val, l: 8 });\n            this._offset += 8;\n        }\n        return this;\n    };\n    ;\n    ByteBuffer.prototype.float = function (val, index) {\n        if (arguments.length == 0) {\n            this._list.push(this._org_buf.getFloat32(this._offset, this._littleEndian));\n            this._offset += 4;\n        }\n        else {\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_Float, d: val, l: 4 });\n            this._offset += 4;\n        }\n        return this;\n    };\n    ;\n    ByteBuffer.prototype.double = function (val, index) {\n        if (arguments.length == 0) {\n            this._list.push(this._org_buf.getFloat64(this._offset, this._littleEndian));\n            this._offset += 8;\n        }\n        else {\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_Double, d: val, l: 8 });\n            this._offset += 8;\n        }\n        return this;\n    };\n    ;\n    /**\n     * 写入或读取一段字节数组\n     **/\n    ByteBuffer.prototype.byteArray = function (val, len, index) {\n        if (!len) {\n            throw new Error('byteArray must got len argument');\n            return this;\n        }\n        if (val == undefined || val == null) {\n            var arr = new Uint8Array(this._org_buf.buffer.slice(this._offset, this._offset + len));\n            this._list.push(arr);\n            this._offset += len;\n        }\n        else {\n            this._list.splice(index != undefined ? index : this._list.length, 0, {\n                t: this.Type_ByteArray,\n                d: val,\n                l: len\n            });\n            this._offset += len;\n        }\n        return this;\n    };\n    ;\n    /**\n     * 解包成数据数组\n     **/\n    ByteBuffer.prototype.unpack = function () {\n        return this._list;\n    };\n    ;\n    /**\n     * 打包成二进制,在前面加上4个字节表示包长\n     **/\n    ByteBuffer.prototype.packWithHead = function () {\n        return this.pack(true);\n    };\n    ;\n    /**\n     * 打包成二进制\n     * @param ifHead 是否在前面加上4个字节表示包长\n     **/\n    ByteBuffer.prototype.pack = function (ifHead) {\n        this._org_buf = new DataView(new ArrayBuffer((ifHead) ? this._offset + 4 : this._offset));\n        var offset = 0;\n        if (ifHead) {\n            this._org_buf.setUint32(offset, this._offset, this._littleEndian);\n            offset += 4;\n        }\n        for (var i = 0; i < this._list.length; i++) {\n            switch (this._list[i].t) {\n                case this.Type_Byte:\n                    this._org_buf.setInt8(offset, this._list[i].d);\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_Short:\n                    this._org_buf.setInt16(offset, this._list[i].d, this._littleEndian);\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_UShort:\n                    this._org_buf.setUint16(offset, this._list[i].d, this._littleEndian);\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_Int32:\n                    this._org_buf.setInt32(offset, this._list[i].d, this._littleEndian);\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_UInt32:\n                    this._org_buf.setUint32(offset, this._list[i].d, this._littleEndian);\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_String:\n                    //前4个字节表示字符串长度\n                    this._org_buf.setUint32(offset, this._list[i].l, this._littleEndian);\n                    offset += 4;\n                    this.utf8Write(this._org_buf, offset, this._list[i].d);\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_VString:\n                    this.utf8Write(this._org_buf, offset, this._list[i].d);\n                    var vlen = this.utf8Length(this._list[i].d); //字符串实际长度\n                    //补齐\\0\n                    for (var j = offset + vlen; j < offset + this._list[i].l; j++) {\n                        this._org_buf.setUint8(j, 0);\n                    }\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_Int64:\n                    this._org_buf.setFloat64(offset, this._list[i].d, this._littleEndian);\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_Float:\n                    this._org_buf.setFloat32(offset, this._list[i].d, this._littleEndian);\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_Double:\n                    this._org_buf.setFloat64(offset, this._list[i].d, this._littleEndian);\n                    offset += this._list[i].l;\n                    break;\n                case this.Type_ByteArray:\n                    var indx = 0;\n                    for (var j = offset; j < offset + this._list[i].l; j++) {\n                        if (indx < this._list[i].d.length) {\n                            this._org_buf.setUint8(j, this._list[i].d[indx]);\n                        }\n                        else { //不够的话，后面补齐0x00\n                            this._org_buf.setUint8(j, 0);\n                        }\n                        indx++;\n                    }\n                    offset += this._list[i].l;\n                    break;\n            }\n        }\n        return this._org_buf.buffer;\n    };\n    ;\n    /**\n     * 未读数据长度\n     **/\n    ByteBuffer.prototype.getAvailable = function () {\n        if (!this._org_buf)\n            return this._offset;\n        return this._org_buf.buffer.byteLength - this._offset;\n    };\n    ;\n    return ByteBuffer;\n}());\nexports[\"default\"] = ByteBuffer;\n","\"use strict\";\nexports.__esModule = true;\nexports.LoginPack = void 0;\nvar LoginPack = /** @class */ (function () {\n    function LoginPack(appId, userId, clientType) {\n        this.userId = userId;\n        this.clientType = clientType;\n        this.appId = appId;\n    }\n    return LoginPack;\n}());\nexports.LoginPack = LoginPack;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wxFetch\"] = factory();\n\telse\n\t\troot[\"wxFetch\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_wxapp_http__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_wxapp_http___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_wxapp_http__);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\nvar httpClient = __WEBPACK_IMPORTED_MODULE_0_wxapp_http___default.a.create({\n  maxConcurrent: 10,\n  timeout: 0,\n  header: {},\n  dataType: 'json'\n});\n\nfunction generateResponse(res) {\n  var header = res.header || {};\n  var config = res.config || {};\n  return {\n    ok: (res.statusCode / 200 | 0) === 1, // 200-299\n    status: res.statusCode,\n    statusText: res.errMsg,\n    url: config.url,\n    clone: function clone() {\n      return generateResponse(res);\n    },\n    text: function text() {\n      return Promise.resolve(typeof res.data === 'string' ? res.data : JSON.stringify(res.data));\n    },\n    json: function json() {\n      if (_typeof(res.data) === 'object') return Promise.resolve(res.data);\n      var json = {};\n      try {\n        json = JSON.parse(res.data);\n      } catch (err) {\n        console.error(err);\n      }\n      return json;\n    },\n    blob: function blob() {\n      return Promise.resolve(new Blob([res.data]));\n    },\n    headers: {\n      keys: function keys() {\n        return Object.keys(header);\n      },\n      entries: function entries() {\n        var all = [];\n        for (var key in header) {\n          if (header.hasOwnProperty(key)) {\n            all.push([key, header[key]]);\n          }\n        }\n        return all;\n      },\n      get: function get(n) {\n        return header[n.toLowerCase()];\n      },\n      has: function has(n) {\n        return n.toLowerCase() in header;\n      }\n    }\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (typeof fetch === 'function' ? fetch.bind() : function (url, options) {\n  options = options || {};\n  return httpClient.request(options.method || 'get', url, options.body, options.headers).then(function (res) {\n    return Promise.resolve(generateResponse(res));\n  }).catch(function (res) {\n    return Promise.reject(generateResponse(res));\n  });\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wxHttp\"] = factory();\n\telse\n\t\troot[\"wxHttp\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Created by axetroy on 17-6-23.\n */\n/// <reference path=\"./index.d.ts\" />\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar event_emitter_js_1 = __webpack_require__(1);\nvar DEFAULT_CONFIG = {\n    maxConcurrent: 10,\n    timeout: 0,\n    header: {},\n    dataType: 'json'\n};\nvar Http = /** @class */ (function (_super) {\n    __extends(Http, _super);\n    function Http(config) {\n        if (config === void 0) { config = DEFAULT_CONFIG; }\n        var _this = _super.call(this) || this;\n        _this.config = config;\n        _this.ctx = typeof wx === 'object' ? wx : { request: function () { } };\n        _this.queue = [];\n        _this.runningTask = 0;\n        _this.maxConcurrent = DEFAULT_CONFIG.maxConcurrent;\n        _this.requestInterceptor = function (config) { return true; };\n        _this.responseInterceptor = function (config, response) { return true; };\n        _this.maxConcurrent = config.maxConcurrent;\n        return _this;\n    }\n    Http.prototype.create = function (config) {\n        if (config === void 0) { config = DEFAULT_CONFIG; }\n        return new Http(config);\n    };\n    Http.prototype.next = function () {\n        var _this = this;\n        var queue = this.queue;\n        if (!queue.length || this.runningTask >= this.maxConcurrent)\n            return;\n        var entity = queue.shift();\n        var config = entity.config;\n        var _a = this, requestInterceptor = _a.requestInterceptor, responseInterceptor = _a.responseInterceptor;\n        if (requestInterceptor.call(this, config) !== true) {\n            var response = {\n                data: null,\n                errMsg: \"Request Interceptor: Request can't pass the Interceptor\",\n                statusCode: 0,\n                header: {}\n            };\n            entity.reject(response);\n            return;\n        }\n        this.emit('request', config);\n        this.runningTask = this.runningTask + 1;\n        var callBack = {\n            success: function (res) {\n                entity.response = res;\n                _this.emit('success', config, res);\n                responseInterceptor.call(_this, config, res) !== true\n                    ? entity.reject(res)\n                    : entity.resolve(res);\n            },\n            fail: function (res) {\n                entity.response = res;\n                _this.emit('fail', config, res);\n                responseInterceptor.call(_this, config, res) !== true\n                    ? entity.reject(res)\n                    : entity.resolve(res);\n            },\n            complete: function () {\n                _this.emit('complete', config, entity.response);\n                _this.next();\n                _this.runningTask = _this.runningTask - 1;\n            }\n        };\n        var requestConfig = Object.assign(config, callBack);\n        this.ctx.request(requestConfig);\n    };\n    Http.prototype.request = function (method, url, data, header, dataType) {\n        var _this = this;\n        if (data === void 0) { data = ''; }\n        if (header === void 0) { header = {}; }\n        if (dataType === void 0) { dataType = 'json'; }\n        var config = {\n            method: method,\n            url: url,\n            data: data,\n            header: __assign({}, header, this.config.header),\n            dataType: dataType || this.config.dataType\n        };\n        return new Promise(function (resolve, reject) {\n            var entity = { config: config, resolve: resolve, reject: reject, response: null };\n            _this.queue.push(entity);\n            _this.next();\n        });\n    };\n    Http.prototype.head = function (url, data, header, dataType) {\n        return this.request('HEAD', url, data, header, dataType);\n    };\n    Http.prototype.options = function (url, data, header, dataType) {\n        return this.request('OPTIONS', url, data, header, dataType);\n    };\n    Http.prototype.get = function (url, data, header, dataType) {\n        return this.request('GET', url, data, header, dataType);\n    };\n    Http.prototype.post = function (url, data, header, dataType) {\n        return this.request('POST', url, data, header, dataType);\n    };\n    Http.prototype.put = function (url, data, header, dataType) {\n        return this.request('PUT', url, data, header, dataType);\n    };\n    Http.prototype['delete'] = function (url, data, header, dataType) {\n        return this.request('DELETE', url, data, header, dataType);\n    };\n    Http.prototype.trace = function (url, data, header, dataType) {\n        return this.request('TRACE', url, data, header, dataType);\n    };\n    Http.prototype.connect = function (url, data, header, dataType) {\n        return this.request('CONNECT', url, data, header, dataType);\n    };\n    Http.prototype.setRequestInterceptor = function (interceptor) {\n        this.requestInterceptor = interceptor;\n        return this;\n    };\n    Http.prototype.setResponseInterceptor = function (interceptor) {\n        this.responseInterceptor = interceptor;\n        return this;\n    };\n    Http.prototype.clean = function () {\n        this.queue = [];\n    };\n    return Http;\n}(event_emitter_js_1.default));\nexports.default = new Http();\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"EventEmitter\"] = factory();\n\telse\n\t\troot[\"EventEmitter\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/**\r\n * Created by axetroy on 2017/3/6.\r\n */\n/// <reference path=\"./index.d.ts\" />\n\nvar name = '@axetroy/event-emitter.js';\nvar id_Identifier = '__id__';\n\nfunction randomId() {\n  return Math.random().toString(36).substr(2, 16);\n}\n\nfunction findIndexById(id) {\n  return this.findIndex(function (callback) {\n    return callback[id_Identifier] === id;\n  });\n}\n\nvar defineProperty = Object.defineProperty;\n\nfunction EventEmitter() {\n  this[name] = {};\n  defineProperty && defineProperty(this, name, { enumerable: false, configurable: false });\n}\n\nvar prototype = EventEmitter.prototype;\n\nprototype.constructor = EventEmitter;\n\nprototype.on = function (event, listener) {\n  var events = this[name],\n      container = events[event] = events[event] || [],\n      id = randomId(),\n      index = void 0;\n  listener[id_Identifier] = id;\n  container.push(listener);\n  return function () {\n    index = findIndexById.call(container, id);\n    index >= 0 && container.splice(index, 1);\n  };\n};\n\nprototype.off = function (event) {\n  this[name][event] = [];\n};\n\nprototype.clear = function () {\n  this[name] = {};\n};\n\nprototype.once = function (event, listener) {\n  var self = this,\n      events = self[name],\n      container = events[event] = events[event] || [],\n      id = randomId(),\n      index = void 0,\n      callback = function callback() {\n    index = findIndexById.call(container, id);\n    index >= 0 && container.splice(index, 1);\n    listener.apply(self, arguments);\n  };\n  callback[id_Identifier] = id;\n  container.push(callback);\n};\n\nprototype.emit = function () {\n  var self = this,\n      argv = [].slice.call(arguments),\n      event = argv.shift(),\n      events = self[name];\n  (events['*'] || []).concat(events[event] || []).map(function (listener) {\n    return self.emitting(event, argv, listener);\n  });\n};\n\nprototype.emitting = function (event, dataArray, listener) {\n  listener.apply(this, dataArray);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = EventEmitter;\n\n/***/ })\n/******/ ]);\n});\n\n/***/ })\n/******/ ]);\n});\n\n/***/ })\n/******/ ]);\n});","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","var global =\n  (typeof globalThis !== 'undefined' && globalThis) ||\n  (typeof self !== 'undefined' && self) ||\n  (typeof global !== 'undefined' && global)\n\nvar support = {\n  searchParams: 'URLSearchParams' in global,\n  iterable: 'Symbol' in global && 'iterator' in Symbol,\n  blob:\n    'FileReader' in global &&\n    'Blob' in global &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in global,\n  arrayBuffer: 'ArrayBuffer' in global\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    /*\n      fetch-mock wraps the Response object in an ES6 Proxy to\n      provide useful test harness features such as flush. However, on\n      ES5 browsers without fetch or Proxy support pollyfills must be used;\n      the proxy-pollyfill is unable to proxy an attribute unless it exists\n      on the object before the Proxy is created. This change ensures\n      Response.bodyUsed exists on the instance, while maintaining the\n      semantic of setting Request.bodyUsed in the constructor before\n      _initBody is called.\n    */\n    this.bodyUsed = this.bodyUsed\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        var isConsumed = consumed(this)\n        if (isConsumed) {\n          return isConsumed\n        }\n        if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n          return Promise.resolve(\n            this._bodyArrayBuffer.buffer.slice(\n              this._bodyArrayBuffer.byteOffset,\n              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n            )\n          )\n        } else {\n          return Promise.resolve(this._bodyArrayBuffer)\n        }\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  if (!(this instanceof Request)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n\n  if (this.method === 'GET' || this.method === 'HEAD') {\n    if (options.cache === 'no-store' || options.cache === 'no-cache') {\n      // Search for a '_' parameter in the query string\n      var reParamSearch = /([?&])_=[^&]*/\n      if (reParamSearch.test(this.url)) {\n        // If it already exists then set the value with the current time\n        this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime())\n      } else {\n        // Otherwise add a new '_' parameter to the end with the current time\n        var reQueryString = /\\?/\n        this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime()\n      }\n    }\n  }\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n  // https://github.com/github/fetch/issues/748\n  // https://github.com/zloirock/core-js/issues/751\n  preProcessedHeaders\n    .split('\\r')\n    .map(function(header) {\n      return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n    })\n    .forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!(this instanceof Response)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = options.statusText === undefined ? '' : '' + options.statusText\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = global.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      setTimeout(function() {\n        resolve(new Response(body, options))\n      }, 0)\n    }\n\n    xhr.onerror = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'))\n      }, 0)\n    }\n\n    xhr.ontimeout = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'))\n      }, 0)\n    }\n\n    xhr.onabort = function() {\n      setTimeout(function() {\n        reject(new DOMException('Aborted', 'AbortError'))\n      }, 0)\n    }\n\n    function fixUrl(url) {\n      try {\n        return url === '' && global.location.href ? global.location.href : url\n      } catch (e) {\n        return url\n      }\n    }\n\n    xhr.open(request.method, fixUrl(request.url), true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr) {\n      if (support.blob) {\n        xhr.responseType = 'blob'\n      } else if (\n        support.arrayBuffer &&\n        request.headers.get('Content-Type') &&\n        request.headers.get('Content-Type').indexOf('application/octet-stream') !== -1\n      ) {\n        xhr.responseType = 'arraybuffer'\n      }\n    }\n\n    if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers)) {\n      Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n        xhr.setRequestHeader(name, normalizeValue(init.headers[name]))\n      })\n    } else {\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n    }\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!global.fetch) {\n  global.fetch = fetch\n  global.Headers = Headers\n  global.Request = Request\n  global.Response = Response\n}\n","var global =\n  (typeof globalThis !== 'undefined' && globalThis) ||\n  (typeof self !== 'undefined' && self) ||\n  (typeof global !== 'undefined' && global)\n\nvar support = {\n  searchParams: 'URLSearchParams' in global,\n  iterable: 'Symbol' in global && 'iterator' in Symbol,\n  blob:\n    'FileReader' in global &&\n    'Blob' in global &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in global,\n  arrayBuffer: 'ArrayBuffer' in global\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n  }\n  // return name.toLowerCase()\n  return name;\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    /*\n      fetch-mock wraps the Response object in an ES6 Proxy to\n      provide useful test harness features such as flush. However, on\n      ES5 browsers without fetch or Proxy support pollyfills must be used;\n      the proxy-pollyfill is unable to proxy an attribute unless it exists\n      on the object before the Proxy is created. This change ensures\n      Response.bodyUsed exists on the instance, while maintaining the\n      semantic of setting Request.bodyUsed in the constructor before\n      _initBody is called.\n    */\n    this.bodyUsed = this.bodyUsed\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('Content-Type')) {\n      if (typeof body === 'string') {\n        this.headers.set('Content-Type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('Content-Type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('Content-Type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        var isConsumed = consumed(this)\n        if (isConsumed) {\n          return isConsumed\n        }\n        if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n          return Promise.resolve(\n            this._bodyArrayBuffer.buffer.slice(\n              this._bodyArrayBuffer.byteOffset,\n              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n            )\n          )\n        } else {\n          return Promise.resolve(this._bodyArrayBuffer)\n        }\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  if (!(this instanceof Request)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n\n  if (this.method === 'GET' || this.method === 'HEAD') {\n    if (options.cache === 'no-store' || options.cache === 'no-cache') {\n      // Search for a '_' parameter in the query string\n      var reParamSearch = /([?&])_=[^&]*/\n      if (reParamSearch.test(this.url)) {\n        // If it already exists then set the value with the current time\n        this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime())\n      } else {\n        // Otherwise add a new '_' parameter to the end with the current time\n        var reQueryString = /\\?/\n        this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime()\n      }\n    }\n  }\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n  // https://github.com/github/fetch/issues/748\n  // https://github.com/zloirock/core-js/issues/751\n  preProcessedHeaders\n    .split('\\r')\n    .map(function(header) {\n      return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n    })\n    .forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n  return headers\n}\n\nfunction parseUniappHeaders(rawHeaders) {\n  var headers = new Headers()\n  for(var key in rawHeaders){\n    headers.append(key, rawHeaders[key])\n  }\n  return headers\n}\n\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!(this instanceof Response)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = options.statusText === undefined ? '' : '' + options.statusText\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = global.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\n// 从 whatwg-fetch 项目改写\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    function fixUrl(url) {\n      try {\n        return url === '' && global.location.href ? global.location.href : url\n      } catch (e) {\n        return url\n      }\n    }\n    function isJson(json) {\n      try {\n        if (typeof json == \"object\") {\n          return true;\n        }\n        if (typeof json == \"string\") {\n          if (typeof JSON.parse(str) == \"object\") {\n            return true;\n          }\n        }\n      } catch(e) {\n      }\n      return false;\n    }\n    function toStr(json) {\n      try {\n        if (typeof json == \"object\") {\n          return JSON.stringify(json);\n        }\n        if (typeof json == \"string\") {\n           return json;\n        }\n      } catch(e) {\n      }\n      return json.toString();\n    }\n\n\n    let rawBody = typeof request._bodyInit === 'undefined' ? null : request._bodyInit;\n    if(request.headers.hasOwnProperty('Content-Type') && request.headers['Content-Type'].indexOf('application/json') >= 0){\n       if(request.method.toUpperCase() === 'POST'){\n         rawBody = JSON.parse(rawBody); // uniapp框架遇到 method = 'POST' 且 Content-Type = 'application/json' 会自动序列化\n       }\n    }\n    const requestTask = uni.request({\n      url: fixUrl(request.url),\n      method: request.method,\n      data: rawBody,\n      header: request.headers.map,\n      complete: (resp)=> {\n        // Logger.info(resp);\n        if (request.signal) {\n          request.signal.removeEventListener('abort', abortXhr);\n        }\n        if(resp.errMsg.indexOf('fail') >= 0){\n          setTimeout(function() {\n            reject(new TypeError('Network request failed'))\n          }, 0);\n          return;\n        }\n        // if(resp.statusCode !== 200){\n        //   setTimeout(function() {\n        //     reject(new TypeError('Network request failed, statusCode:' + resp.statusCode + \"  full text:\" + JSON.stringify(resp.data)))\n        //   }, 0)\n        //   return;\n        // }\n        var options = {\n          status: resp.statusCode,\n          statusText: resp.data ? toStr(resp.data) : '',\n          headers: parseUniappHeaders(resp.header || {})\n        };\n        options.url = options.headers.get('X-Request-URL')\n        var body = options.statusText;\n        setTimeout(function() {\n          resolve(new Response(body, options))\n        }, 0)\n\n      }\n    });\n    function abortXhr() {\n      requestTask.abort()\n    }\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n    }\n\n  })\n}\n\nfetch.polyfill = true\n\nif (!global.fetch) {\n  global.fetch = fetch\n  global.Headers = Headers\n  global.Request = Request\n  global.Response = Response\n}\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","module.exports = require('../package.json').version;\n","\"use strict\";\nexports.__esModule = true;\nexports.RequestBase = void 0;\nvar RequestBase = /** @class */ (function () {\n    function RequestBase(appId, clientType, imei) {\n        this.appId = appId;\n        this.clientType = clientType;\n        this.imei = imei;\n    }\n    return RequestBase;\n}());\nexports.RequestBase = RequestBase;\n","\"use strict\";\nexports.__esModule = true;\nexports.RequestParams = void 0;\nvar RequestParams = /** @class */ (function () {\n    function RequestParams(appId, identifier, userSign) {\n        this.appId = appId;\n        this.identifier = identifier;\n        this.userSign = userSign;\n    }\n    return RequestParams;\n}());\nexports.RequestParams = RequestParams;\n","\"use strict\";\nexports.__esModule = true;\nvar Logger_1 = require(\"../log/Logger\");\nvar ImClient_1 = require(\"./ImClient\");\nvar ApiResponse_1 = require(\"../model/ApiResponse\");\nvar utils_1 = require(\"../common/utils\");\nvar Fetch_1 = require(\"../common/Fetch\");\nvar WebToolkit_1 = require(\"../common/WebToolkit\");\nvar HttpApi = /** @class */ (function () {\n    function HttpApi(url) {\n        this.url = \"http://127.0.0.1:8000\";\n        this.url = url;\n    }\n    HttpApi.prototype.call = function (url, params, body) {\n        var userId = ImClient_1.imClient.userId;\n        Logger_1[\"default\"].info(userId);\n        var reqUrl = this.url + url;\n        if (params != null) {\n            var paramStr = this.setQueryConfig(params);\n            console.log(paramStr);\n            reqUrl += paramStr;\n        }\n        var requestMethod = \"POST\";\n        var headers = {\n            'Content-Type': 'application/json'\n        };\n        var request = { method: requestMethod, headers: headers, mode: 'cors', body: utils_1[\"default\"].json(body) };\n        return this.httpFetch(reqUrl, request);\n    };\n    HttpApi.prototype.setQueryConfig = function (params) {\n        var _str = \"?\";\n        for (var o in params) {\n            _str += o + \"=\" + params[o] + \"&\";\n        }\n        _str = _str.substring(0, _str.length - 1); //末尾是&\n        return _str;\n    };\n    HttpApi.prototype.httpFetch = function (url, request) {\n        var _this = this;\n        console.log(\"httpFetch\");\n        var system = WebToolkit_1[\"default\"].getDeviceInfo().system;\n        system = 'UniApp';\n        if (system === 'WxApp') {\n            // @ts-ignore\n            if (wx === undefined) {\n                throw new Error('wx handle not exist');\n            }\n            return new Promise(function (resolve, reject) {\n                // @ts-ignore\n                wx.request({\n                    method: request.method,\n                    url: url,\n                    data: utils_1[\"default\"].bean(request),\n                    header: request.headers,\n                    success: function (res) {\n                        console.log(res);\n                        resolve(res.data);\n                    },\n                    fail: function (res) {\n                        console.log(res);\n                        reject(res.data);\n                    }\n                });\n            });\n        }\n        else if (system === 'RNNative') {\n            var rnFetch = Fetch_1[\"default\"].getFetchToolkit();\n            console.log(\"rnFetch\");\n            return rnFetch(url, request).then(function (response) {\n                return response.json();\n            }).then(function (res) {\n                Logger_1[\"default\"].info(\"==> [\" + request.method + \"] \" + url + \" back:\" + utils_1[\"default\"].json(res));\n                var resp = _this.response2ApiResponse(res);\n                if (resp.isFailed()) {\n                    return Promise.reject(resp);\n                }\n                return Promise.resolve(_this.response2ApiResponse(res));\n            });\n        }\n        else if (system === 'UniApp') {\n            var rnFetch = Fetch_1[\"default\"].getFetchToolkit();\n            return rnFetch(url, request).then(function (response) {\n                console.log(response);\n                return response.json();\n            }).then(function (res) {\n                Logger_1[\"default\"].info(\"==> [\" + request.method + \"] \" + url + \" back:\" + utils_1[\"default\"].json(res));\n                var resp = _this.response2ApiResponse(res);\n                if (resp.isFailed()) {\n                    return Promise.reject(resp);\n                }\n                return Promise.resolve(resp);\n            });\n        }\n        else {\n            var webFetch = Fetch_1[\"default\"].getFetchToolkit();\n            console.log(\"webFetch\");\n            return webFetch(url, request).then(function (response) {\n                return response.json();\n            }).then(function (res) {\n                Logger_1[\"default\"].info(\"==> [\" + request.method + \"] \" + url + \" back:\" + utils_1[\"default\"].json(res));\n                var resp = _this.response2ApiResponse(res);\n                console.log(res);\n                if (resp.isFailed()) {\n                    return Promise.reject(resp);\n                }\n                return Promise.resolve(_this.response2ApiResponse(res));\n            });\n        }\n    };\n    HttpApi.prototype.response2ApiResponse = function (response) {\n        var apiResponse = new ApiResponse_1[\"default\"](true);\n        apiResponse.data = response.data;\n        apiResponse.msg = response.msg;\n        apiResponse.code = response.code;\n        return apiResponse;\n    };\n    return HttpApi;\n}());\nexports[\"default\"] = HttpApi;\n","\"use strict\";\nexports.__esModule = true;\nvar ApiResponse = /** @class */ (function () {\n    function ApiResponse(succeed) {\n        if (succeed === void 0) { succeed = false; }\n        this.msg = '';\n        this.data = null;\n        if (succeed) {\n            this.code = 200;\n        }\n    }\n    ApiResponse.prototype.isSucceed = function () {\n        return this.code === 200;\n    };\n    ApiResponse.prototype.isFailed = function () {\n        return !this.isSucceed();\n    };\n    return ApiResponse;\n}());\nexports[\"default\"] = ApiResponse;\n","\"use strict\";\nexports.__esModule = true;\nexports.ConversationEventCommand = exports.UserEventCommand = exports.SystemCommand = exports.GroupEventCommand = exports.FriendshipEventCommand = exports.MessageCommand = void 0;\nvar MessageCommand;\n(function (MessageCommand) {\n    //单聊消息 1103\n    MessageCommand[MessageCommand[\"MSG_P2P\"] = 1103] = \"MSG_P2P\";\n    //单聊消息ACK 1046\n    MessageCommand[MessageCommand[\"MSG_ACK\"] = 1046] = \"MSG_ACK\";\n    //消息收到ack 1107\n    MessageCommand[MessageCommand[\"MSG_RECEIVE_ACK\"] = 1107] = \"MSG_RECEIVE_ACK\";\n    //发送消息已读   1106\n    MessageCommand[MessageCommand[\"MSG_READED\"] = 1106] = \"MSG_READED\";\n    //消息已读通知给同步端 1053\n    MessageCommand[MessageCommand[\"MSG_READED_NOTIFY\"] = 1053] = \"MSG_READED_NOTIFY\";\n    //消息已读回执，给原消息发送方 1054\n    MessageCommand[MessageCommand[\"MSG_READED_RECEIPT\"] = 1054] = \"MSG_READED_RECEIPT\";\n    //消息撤回 1050\n    MessageCommand[MessageCommand[\"MSG_RECALL\"] = 1050] = \"MSG_RECALL\";\n    //消息撤回通知 1052\n    MessageCommand[MessageCommand[\"MSG_RECALL_NOTIFY\"] = 1052] = \"MSG_RECALL_NOTIFY\";\n    //消息撤回回报 1051\n    MessageCommand[MessageCommand[\"MSG_RECALL_ACK\"] = 1051] = \"MSG_RECALL_ACK\";\n})(MessageCommand || (MessageCommand = {}));\nexports.MessageCommand = MessageCommand;\nvar FriendshipEventCommand;\n(function (FriendshipEventCommand) {\n    //添加好友\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_ADD\"] = 3000] = \"FRIEND_ADD\";\n    //更新好友\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_UPDATE\"] = 3001] = \"FRIEND_UPDATE\";\n    //删除好友\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_DELETE\"] = 3002] = \"FRIEND_DELETE\";\n    //好友申请\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_REQUEST\"] = 3003] = \"FRIEND_REQUEST\";\n    //好友申请已读\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_REQUEST_READ\"] = 3004] = \"FRIEND_REQUEST_READ\";\n    //好友申请审批\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_REQUEST_APPROVE\"] = 3005] = \"FRIEND_REQUEST_APPROVE\";\n    //添加黑名单\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_BLACK_ADD\"] = 3010] = \"FRIEND_BLACK_ADD\";\n    //移除黑名单\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_BLACK_DELETE\"] = 3011] = \"FRIEND_BLACK_DELETE\";\n    //新建好友分组\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_GROUP_ADD\"] = 3012] = \"FRIEND_GROUP_ADD\";\n    //删除好友分组\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_GROUP_DELETE\"] = 3013] = \"FRIEND_GROUP_DELETE\";\n    //好友分组添加成员\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_GROUP_MEMBER_ADD\"] = 3014] = \"FRIEND_GROUP_MEMBER_ADD\";\n    //好友分组移除成员\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_GROUP_MEMBER_DELETE\"] = 3015] = \"FRIEND_GROUP_MEMBER_DELETE\";\n    //删除所有好友\n    FriendshipEventCommand[FriendshipEventCommand[\"FRIEND_ALL_DELETE\"] = 3016] = \"FRIEND_ALL_DELETE\";\n})(FriendshipEventCommand || (FriendshipEventCommand = {}));\nexports.FriendshipEventCommand = FriendshipEventCommand;\nvar GroupEventCommand;\n(function (GroupEventCommand) {\n    /**\n     * 推送申请入群通知 2023\n     */\n    GroupEventCommand[GroupEventCommand[\"JOIN_GROUP\"] = 2000] = \"JOIN_GROUP\";\n    /**\n     * 推送添加群成员 2001，通知给所有管理员和本人\n     */\n    GroupEventCommand[GroupEventCommand[\"ADDED_MEMBER\"] = 2001] = \"ADDED_MEMBER\";\n    /**\n     * 推送创建群组通知 2002，通知给所有人\n     */\n    GroupEventCommand[GroupEventCommand[\"CREATED_GROUP\"] = 2002] = \"CREATED_GROUP\";\n    /**\n     * 推送更新群组通知 2003，通知给所有人\n     */\n    GroupEventCommand[GroupEventCommand[\"UPDATED_GROUP\"] = 2003] = \"UPDATED_GROUP\";\n    /**\n     * 推送退出群组通知 2004，通知给管理员和操作人\n     */\n    GroupEventCommand[GroupEventCommand[\"EXIT_GROUP\"] = 2004] = \"EXIT_GROUP\";\n    /**\n     * 推送修改群成员通知 2005，通知给管理员和被操作人\n     */\n    GroupEventCommand[GroupEventCommand[\"UPDATED_MEMBER\"] = 2005] = \"UPDATED_MEMBER\";\n    /**\n     * 推送删除群成员通知 2006，通知给所有群成员和被踢人\n     */\n    GroupEventCommand[GroupEventCommand[\"DELETED_MEMBER\"] = 2006] = \"DELETED_MEMBER\";\n    /**\n     * 推送解散群通知 2007，通知所有人\n     */\n    GroupEventCommand[GroupEventCommand[\"DESTROY_GROUP\"] = 2007] = \"DESTROY_GROUP\";\n    /**\n     * 推送转让群主 2008，通知所有人\n     */\n    GroupEventCommand[GroupEventCommand[\"TRANSFER_GROUP\"] = 2008] = \"TRANSFER_GROUP\";\n    /**\n     * 禁言群 2009，通知所有人\n     */\n    GroupEventCommand[GroupEventCommand[\"MUTE_GROUP\"] = 2009] = \"MUTE_GROUP\";\n    /**\n     * 禁言/解禁 群成员 2010，通知管理员和被操作人\n     */\n    GroupEventCommand[GroupEventCommand[\"SPEAK_GROUP_MEMBER\"] = 2010] = \"SPEAK_GROUP_MEMBER\";\n    /**\n     * 审批群申请通知\n     */\n    GroupEventCommand[GroupEventCommand[\"GROUP_REQUEST_APPROVE\"] = 2011] = \"GROUP_REQUEST_APPROVE\";\n    /**\n     * 群申请已读通知\n     */\n    GroupEventCommand[GroupEventCommand[\"GROUP_REQUEST_READ\"] = 2012] = \"GROUP_REQUEST_READ\";\n    //群聊消息收发 2104\n    GroupEventCommand[GroupEventCommand[\"MSG_GROUP\"] = 2104] = \"MSG_GROUP\";\n    //发送消息已读   2106\n    GroupEventCommand[GroupEventCommand[\"MSG_GROUP_READED\"] = 2106] = \"MSG_GROUP_READED\";\n    //消息已读通知给同步端 2053\n    GroupEventCommand[GroupEventCommand[\"MSG_GROUP_READED_NOTIFY\"] = 2053] = \"MSG_GROUP_READED_NOTIFY\";\n    //消息已读回执，给原消息发送方 2054\n    GroupEventCommand[GroupEventCommand[\"MSG_GROUP_READED_RECEIPT\"] = 2054] = \"MSG_GROUP_READED_RECEIPT\";\n    //群聊消息ack 2047\n    GroupEventCommand[GroupEventCommand[\"GROUP_MSG_ACK\"] = 2047] = \"GROUP_MSG_ACK\";\n})(GroupEventCommand || (GroupEventCommand = {}));\nexports.GroupEventCommand = GroupEventCommand;\nvar SystemCommand;\n(function (SystemCommand) {\n    //心跳 9999\n    SystemCommand[SystemCommand[\"PING\"] = 9999] = \"PING\";\n    /**\n     * 登录 9000\n     */\n    SystemCommand[SystemCommand[\"LOGIN\"] = 9000] = \"LOGIN\";\n    //登录ack  9001\n    SystemCommand[SystemCommand[\"LOGIN_ACK\"] = 9001] = \"LOGIN_ACK\";\n    //登出  9003\n    SystemCommand[SystemCommand[\"LOGOUT\"] = 9003] = \"LOGOUT\";\n    //下线通知 用于多端互斥  9002\n    SystemCommand[SystemCommand[\"MUTUAL_LOGIN\"] = 9002] = \"MUTUAL_LOGIN\";\n})(SystemCommand || (SystemCommand = {}));\nexports.SystemCommand = SystemCommand;\nvar UserEventCommand;\n(function (UserEventCommand) {\n    //用户信息修改command 4000\n    UserEventCommand[UserEventCommand[\"USER_MODIFY\"] = 4000] = \"USER_MODIFY\";\n    //4001 用户在线状态修改\n    UserEventCommand[UserEventCommand[\"USER_ONLINE_STATUS_CHANGE\"] = 4001] = \"USER_ONLINE_STATUS_CHANGE\";\n    //4004 用户在线状态通知报文\n    UserEventCommand[UserEventCommand[\"USER_ONLINE_STATUS_CHANGE_NOTIFY\"] = 4004] = \"USER_ONLINE_STATUS_CHANGE_NOTIFY\";\n    //4005 用户在线状态通知同步报文\n    UserEventCommand[UserEventCommand[\"USER_ONLINE_STATUS_CHANGE_NOTIFY_SYNC\"] = 4005] = \"USER_ONLINE_STATUS_CHANGE_NOTIFY_SYNC\";\n    //4006 用户自己在线状态更改通知报文\n    UserEventCommand[UserEventCommand[\"USER_CUSTOM_STATUS_CHANGE_NOTIFY\"] = 4006] = \"USER_CUSTOM_STATUS_CHANGE_NOTIFY\";\n})(UserEventCommand || (UserEventCommand = {}));\nexports.UserEventCommand = UserEventCommand;\nvar ConversationEventCommand;\n(function (ConversationEventCommand) {\n    //删除会话\n    ConversationEventCommand[ConversationEventCommand[\"CONVERSATION_DELETE\"] = 5000] = \"CONVERSATION_DELETE\";\n    //更新会话\n    ConversationEventCommand[ConversationEventCommand[\"CONVERSATION_UPDATE\"] = 5001] = \"CONVERSATION_UPDATE\";\n})(ConversationEventCommand || (ConversationEventCommand = {}));\nexports.ConversationEventCommand = ConversationEventCommand;\n","\"use strict\";\nexports.__esModule = true;\nexports.createCustomerMessage = exports.createLocationMessage = exports.createFileMessage = exports.createEmojiMessage = exports.createVideoMessage = exports.createAudioMessage = exports.createImageMessage = exports.createTextMessage = void 0;\nvar MessagePack_1 = require(\"../pack/MessagePack\");\n// 创建文本消息\nvar createTextMessage = function (appId, from, to, text, conversationType) {\n    var messagePack = new MessagePack_1.MessagePack(appId, conversationType);\n    messagePack.buildTextMessagePack(from, to, text);\n    return messagePack;\n};\nexports.createTextMessage = createTextMessage;\n// 创建图片消息\nvar createImageMessage = function (appId, from, to, image, conversationType) {\n    var messagePack = new MessagePack_1.MessagePack(appId, conversationType);\n    messagePack.buildImageMessagePack(from, to, image);\n    return messagePack;\n};\nexports.createImageMessage = createImageMessage;\n// 创建语音消息\nvar createAudioMessage = function (appId, from, to, audio, conversationType) {\n    var messagePack = new MessagePack_1.MessagePack(appId, conversationType);\n    messagePack.buildAudioMessagePack(from, to, audio);\n    return messagePack;\n};\nexports.createAudioMessage = createAudioMessage;\n// 创建视频消息\nvar createVideoMessage = function (appId, from, to, video, conversationType) {\n    var messagePack = new MessagePack_1.MessagePack(appId, conversationType);\n    messagePack.buildVideoMessagePack(from, to, video);\n    return messagePack;\n};\nexports.createVideoMessage = createVideoMessage;\n// 创建表情消息\nvar createEmojiMessage = function (appId, from, to, emoji, conversationType) {\n    var messagePack = new MessagePack_1.MessagePack(appId, conversationType);\n    messagePack.buildEmojiMessagePack(from, to, emoji);\n    return messagePack;\n};\nexports.createEmojiMessage = createEmojiMessage;\n// 创建文件消息\nvar createFileMessage = function (appId, from, to, file, conversationType) {\n    var messagePack = new MessagePack_1.MessagePack(appId, conversationType);\n    messagePack.buildFileMessagePack(from, to, file);\n    return messagePack;\n};\nexports.createFileMessage = createFileMessage;\n// 创建位置消息\nvar createLocationMessage = function (appId, from, to, location, conversationType) {\n    var messagePack = new MessagePack_1.MessagePack(appId, conversationType);\n    messagePack.buildLocationMessagePack(from, to, location);\n    return messagePack;\n};\nexports.createLocationMessage = createLocationMessage;\n// 创建自定义消息\nvar createCustomerMessage = function (appId, from, to, type, custom, conversationType) {\n    var messagePack = new MessagePack_1.MessagePack(appId, conversationType);\n    messagePack.buildCustomerMessagePack(from, to, type, custom);\n    return messagePack;\n};\nexports.createCustomerMessage = createCustomerMessage;\n","\"use strict\";\nexports.__esModule = true;\nexports.MessagePack = void 0;\nvar utils_1 = require(\"../common/utils\");\nvar ConversationType_1 = require(\"../common/ConversationType\");\nvar MessagePack = /** @class */ (function () {\n    function MessagePack(appId, conversationType) {\n        this.messageId = utils_1[\"default\"].uuid();\n        this.appId = appId;\n        this.messageRandom = this.RangeInteger(0, 10000);\n        this.messageTime = Date.parse(new Date().toString());\n        this.conversationType = conversationType;\n    }\n    MessagePack.prototype.RangeInteger = function (min, max) {\n        var range = max - min;\n        var value = Math.floor(Math.random() * range) + min;\n        return value;\n    };\n    // 创建文本消息\n    MessagePack.prototype.buildTextMessagePack = function (fromId, toId, text) {\n        this.fromId = fromId;\n        if (this.conversationType === ConversationType_1[\"default\"].P2PMessage) {\n            this.toId = toId;\n        }\n        else {\n            this.groupId = toId;\n        }\n        var body = { type: 1, content: text };\n        this.messageBody = utils_1[\"default\"].json(body);\n    };\n    // 创建图片消息\n    MessagePack.prototype.buildImageMessagePack = function (fromId, toId, image) {\n        this.fromId = fromId;\n        if (this.conversationType === ConversationType_1[\"default\"].P2PMessage) {\n            this.toId = toId;\n        }\n        else {\n            this.groupId = toId;\n        }\n        var body = { type: 2, content: image };\n        this.messageBody = utils_1[\"default\"].json(body);\n    };\n    // 创建语音消息\n    MessagePack.prototype.buildAudioMessagePack = function (fromId, toId, audio) {\n        this.fromId = fromId;\n        if (this.conversationType === ConversationType_1[\"default\"].P2PMessage) {\n            this.toId = toId;\n        }\n        else {\n            this.groupId = toId;\n        }\n        var body = { type: 3, content: audio };\n        this.messageBody = utils_1[\"default\"].json(body);\n    };\n    // 创建视频消息\n    MessagePack.prototype.buildVideoMessagePack = function (fromId, toId, video) {\n        this.fromId = fromId;\n        if (this.conversationType === ConversationType_1[\"default\"].P2PMessage) {\n            this.toId = toId;\n        }\n        else {\n            this.groupId = toId;\n        }\n        var body = { type: 4, content: video };\n        this.messageBody = utils_1[\"default\"].json(body);\n    };\n    // 创建表情消息\n    MessagePack.prototype.buildEmojiMessagePack = function (fromId, toId, emoji) {\n        this.fromId = fromId;\n        if (this.conversationType === ConversationType_1[\"default\"].P2PMessage) {\n            this.toId = toId;\n        }\n        else {\n            this.groupId = toId;\n        }\n        var body = { type: 5, content: emoji };\n        this.messageBody = utils_1[\"default\"].json(body);\n    };\n    // 创建文件消息\n    MessagePack.prototype.buildFileMessagePack = function (fromId, toId, file) {\n        this.fromId = fromId;\n        if (this.conversationType === ConversationType_1[\"default\"].P2PMessage) {\n            this.toId = toId;\n        }\n        else {\n            this.groupId = toId;\n        }\n        var body = { type: 6, content: file };\n        this.messageBody = utils_1[\"default\"].json(body);\n    };\n    // 创建位置消息\n    MessagePack.prototype.buildLocationMessagePack = function (fromId, toId, location) {\n        this.fromId = fromId;\n        if (this.conversationType === ConversationType_1[\"default\"].P2PMessage) {\n            this.toId = toId;\n        }\n        else {\n            this.groupId = toId;\n        }\n        var body = { type: 7, content: location };\n        this.messageBody = utils_1[\"default\"].json(body);\n    };\n    // 创建自定义消息\n    MessagePack.prototype.buildCustomerMessagePack = function (fromId, toId, type, obj) {\n        this.fromId = fromId;\n        if (this.conversationType === ConversationType_1[\"default\"].P2PMessage) {\n            this.toId = toId;\n        }\n        else {\n            this.groupId = toId;\n        }\n        var body = { type: type, content: obj };\n        this.messageBody = utils_1[\"default\"].json(body);\n    };\n    return MessagePack;\n}());\nexports.MessagePack = MessagePack;\n"],"sourceRoot":""}